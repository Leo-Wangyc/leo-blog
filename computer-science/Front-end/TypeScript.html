<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScript | Leo&#39;s Starship</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/leo-blog/assets/css/0.styles.6ec2a987.css" as="style"><link rel="preload" href="/leo-blog/assets/js/app.bfe0a0b7.js" as="script"><link rel="preload" href="/leo-blog/assets/js/2.36229468.js" as="script"><link rel="preload" href="/leo-blog/assets/js/22.c16cfa9f.js" as="script"><link rel="prefetch" href="/leo-blog/assets/js/10.d3ccb201.js"><link rel="prefetch" href="/leo-blog/assets/js/11.34ea13c9.js"><link rel="prefetch" href="/leo-blog/assets/js/12.100bdd4c.js"><link rel="prefetch" href="/leo-blog/assets/js/13.0196917d.js"><link rel="prefetch" href="/leo-blog/assets/js/14.e0de9719.js"><link rel="prefetch" href="/leo-blog/assets/js/15.bbbbc91e.js"><link rel="prefetch" href="/leo-blog/assets/js/16.894b3e9b.js"><link rel="prefetch" href="/leo-blog/assets/js/17.66638d45.js"><link rel="prefetch" href="/leo-blog/assets/js/18.519870b3.js"><link rel="prefetch" href="/leo-blog/assets/js/19.557679db.js"><link rel="prefetch" href="/leo-blog/assets/js/20.fce0f6ce.js"><link rel="prefetch" href="/leo-blog/assets/js/21.ce536719.js"><link rel="prefetch" href="/leo-blog/assets/js/23.666f621b.js"><link rel="prefetch" href="/leo-blog/assets/js/24.be802471.js"><link rel="prefetch" href="/leo-blog/assets/js/25.595306b9.js"><link rel="prefetch" href="/leo-blog/assets/js/26.195f319f.js"><link rel="prefetch" href="/leo-blog/assets/js/27.2a5318e4.js"><link rel="prefetch" href="/leo-blog/assets/js/28.8b21ba99.js"><link rel="prefetch" href="/leo-blog/assets/js/29.d4abc438.js"><link rel="prefetch" href="/leo-blog/assets/js/3.1ae439f9.js"><link rel="prefetch" href="/leo-blog/assets/js/30.35cd2f3c.js"><link rel="prefetch" href="/leo-blog/assets/js/31.472ee938.js"><link rel="prefetch" href="/leo-blog/assets/js/32.336b1f6a.js"><link rel="prefetch" href="/leo-blog/assets/js/4.b471a861.js"><link rel="prefetch" href="/leo-blog/assets/js/5.0770b70b.js"><link rel="prefetch" href="/leo-blog/assets/js/6.917bb234.js"><link rel="prefetch" href="/leo-blog/assets/js/7.3c7496cf.js"><link rel="prefetch" href="/leo-blog/assets/js/8.415d7f3c.js"><link rel="prefetch" href="/leo-blog/assets/js/9.5080fa6c.js">
    <link rel="stylesheet" href="/leo-blog/assets/css/0.styles.6ec2a987.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/leo-blog/" class="home-link router-link-active"><!----> <span class="site-name">Leo's Starship</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/leo-blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide" class="dropdown-title"><span class="title">Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide" class="mobile-dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/leo-blog/" class="nav-link">
  Home
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/leo-blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide" class="dropdown-title"><span class="title">Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide" class="mobile-dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/leo-blog/" class="nav-link">
  Home
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Computer Science</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>C</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Front End</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/leo-blog/computer-science/Front-end/FrontEndTheory.html" class="sidebar-link">Front-End Theory</a></li><li><a href="/leo-blog/computer-science/Front-end/HTML5.html" class="sidebar-link">HTML</a></li><li><a href="/leo-blog/computer-science/Front-end/CSS.html" class="sidebar-link">CSS</a></li><li><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html" class="sidebar-link">JS &amp; ES6+</a></li><li><a href="/leo-blog/computer-science/Front-end/TypeScript.html" aria-current="page" class="active sidebar-link">TypeScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/TypeScript.html#ts-数据类型" class="sidebar-link">ts 数据类型</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/TypeScript.html#断言" class="sidebar-link">断言</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/TypeScript.html#ts-函数" class="sidebar-link">ts 函数</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/TypeScript.html#类" class="sidebar-link">类</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/TypeScript.html#接口" class="sidebar-link">接口</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/TypeScript.html#泛型" class="sidebar-link">泛型</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/TypeScript.html#ts-关键字" class="sidebar-link">ts 关键字</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/TypeScript.html#类型兼容性" class="sidebar-link">类型兼容性</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/TypeScript.html#record" class="sidebar-link">Record</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/TypeScript.html#装饰器" class="sidebar-link">装饰器</a></li></ul></li><li><a href="/leo-blog/computer-science/Front-end/Node.html" class="sidebar-link">Node</a></li><li><a href="/leo-blog/computer-science/Front-end/Vue.html" class="sidebar-link">Vue</a></li><li><a href="/leo-blog/computer-science/Front-end/React.html" class="sidebar-link">React</a></li><li><a href="/leo-blog/computer-science/Front-end/Miniapp.html" class="sidebar-link">Mini App</a></li><li><a href="/leo-blog/computer-science/Front-end/Webpack.html" class="sidebar-link">Webpack</a></li><li><a href="/leo-blog/computer-science/Front-end/ComponentDesign.html" class="sidebar-link">Component Design</a></li><li><a href="/leo-blog/computer-science/Front-end/CloudDevelopment.html" class="sidebar-link">Cloud Development</a></li><li><a href="/leo-blog/computer-science/Front-end/project.html" class="sidebar-link">Real Project</a></li><li><a href="/leo-blog/computer-science/Front-end/special.html" class="sidebar-link">Special</a></li></ul></section></li><li><a href="/leo-blog/computer-science/algorithm.html" class="sidebar-link">Algorithm</a></li><li><a href="/leo-blog/computer-science/ComputerScience.html" class="sidebar-link">Computer Tech</a></li><li><a href="/leo-blog/computer-science/Git.html" class="sidebar-link">Git</a></li><li><a href="/leo-blog/computer-science/vue-press.html" class="sidebar-link">Vue Press</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>English</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Ecnomics</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="typescript"><a href="#typescript" class="header-anchor">#</a> TypeScript</h1> <blockquote><p>深入理解 TypeScript: https://jkchao.github.io/typescript-book-chinese/#why</p></blockquote> <h2 id="ts-数据类型"><a href="#ts-数据类型" class="header-anchor">#</a> ts 数据类型</h2> <hr> <h3 id="常见数据类型"><a href="#常见数据类型" class="header-anchor">#</a> 常见数据类型</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 基本数据类型</span>
<span class="token keyword">let</span> married<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> first_name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr1<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr2<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 和上面一样，只不过写法不同</span>

<span class="token comment">// 扩展数据类型</span>
<span class="token comment">// 1.元组类型tuple（即数量和类型已知的数组）</span>
<span class="token keyword">let</span> tupleArr<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Leo&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 2.任意类型any，变量定义为any就和Js无差别了，不会进行类型校验</span>
<span class="token keyword">let</span> root<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 类型的注意点</span>
<span class="token comment">// 1.null和undefined是其他类型的子类型</span>
<span class="token keyword">let</span> x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
x <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
x <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 此处并不会报错，因为undefined和null均为number的子类型，如果开启严格模式，则此处会报错，详见6.1.2</span>
</code></pre></div><h3 id="数据类型注意事项"><a href="#数据类型注意事项" class="header-anchor">#</a> 数据类型注意事项</h3> <p>在 ts 配置文件中，tsconfig.json，如若开启了严格模式，则某些类型的定义会变得更加严格，例如，1.1 中示例的的 null 和 undefined 将不再会是其他类型的子类型</p> <h3 id="枚举"><a href="#枚举" class="header-anchor">#</a> 枚举</h3> <p>枚举类似定义常量，不过，可以实现两边互等</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">enum</span> Day <span class="token punctuation">{</span>
  <span class="token constant">SUNDAY</span><span class="token punctuation">,</span>
  <span class="token constant">MONDAY</span><span class="token punctuation">,</span>
  <span class="token constant">TUESDAY</span><span class="token punctuation">,</span>
  <span class="token constant">WEDNESDAY</span><span class="token punctuation">,</span>
  <span class="token constant">THURSDAY</span><span class="token punctuation">,</span>
  <span class="token constant">FRIDAY</span><span class="token punctuation">,</span>
  <span class="token constant">SATURDAY</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如上述例子中，虽然没给每个枚举赋值，但是 ts 默认会帮忙将所有值进行标号，如下</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">enum</span> Day <span class="token punctuation">{</span>
  <span class="token constant">SUNDAY</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token constant">MONDAY</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token constant">TUESDAY</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token constant">WEDNESDAY</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token constant">THURSDAY</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
  <span class="token constant">FRIDAY</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
  <span class="token constant">SATURDAY</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>除此之外，枚举支持两边互等互点，比如</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>Day<span class="token punctuation">.</span><span class="token constant">SUNDAY</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
Day<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 'SUNDAY'</span>
</code></pre></div><h3 id="never"><a href="#never" class="header-anchor">#</a> never</h3> <h4 id="never-作用和使用"><a href="#never-作用和使用" class="header-anchor">#</a> never 作用和使用</h4> <ol><li><p>never 是 ts 中的一种特殊类型，用通俗的话解释它的作用就是：<strong>用来告知编译器某处代码永远不会执行,从而获得编译器提示, 以避免程序员在一个永远不会(或不应该)执行的地方编写代码.</strong></p></li> <li><p>除此之外，其还具有的功能是：</p></li></ol> <ul><li><p><strong>检查「Unreachable code」</strong>，在编译器中呈现的就是颜色变浅的无法执行的代码块</p> <p>举个栗子</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Error: Unreachable code detected.ts(7027)监测到了不可读取的程序代码</span>
</code></pre></div><p>在上面这个示例中，hello world 不会被打印，因为 process.exit()的返回值是一个 never，程序走到这里已经终结退出了，所以后续的代码不会执行</p></li> <li><p><strong>间接收窄其他数据的类型</strong></p> <p>同样举个栗子</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">throwError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">firstChar</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">msg</span><span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword">undefined</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token function">throwError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> chr <span class="token operator">=</span> msg<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//❌Object is possibly 'undefined'.</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">throwError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">firstChar</span><span class="token punctuation">(</span>msg<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token function">throwError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> chr <span class="token operator">=</span> msg<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ✅</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在上面这个示例中，刚开始有一个疑惑，如下</p> <blockquote><p>其实 throwError 应该已经是抛出了一个异常了，按理来说，抛出异常意味着程序结束，如果 object 为 Undefined 的话，应该不会走到 msg.charAt 里面去，那为什么还需要一个 never 才能让编译器停止报错？</p></blockquote> <blockquote><p>上述疑问，张仁阳老师给出的解释是：这是类型较验。如果程序里抛出错误，返回值类型就需要定义成 never,表示永远不会到达 的值</p></blockquote></li> <li><p><strong>其他</strong></p> <p>在某些情况下，会自动返回一个 never，举个栗子</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//此处编译器会提示x的值为number</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//此处编译器会提示x的值为stirng</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//此处编译器会提示x的值为never</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h4 id="never-和-void"><a href="#never-和-void" class="header-anchor">#</a> never 和 void</h4> <ol><li><p>返回值区别</p> <p>void 代表返回值为空，在非严格模式下，可以一个定义了 void 的函数返回值可以是 undefined，可以是 null，严格模式下，可以是 undefined，不能为 null</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">voidFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">undefined</span> <span class="token operator">|</span> unll<span class="token punctuation">;</span> <span class="token comment">// 非严格模式下，两种均可，严格模式下，null会报错</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果函数被定义为 never，那么不能 return 任何值</p></li> <li><p>执行区别</p> <p>返回为 void 的函数其中的函数会执行，返回为 never 的函数不会执行</p></li></ol> <h3 id="bigint-和-number"><a href="#bigint-和-number" class="header-anchor">#</a> bigint 和 number</h3> <p>BigInt 和 Number 是 js 中的类型，bigint 和 number 是 ts 中的类型</p> <h3 id="复杂数据类型"><a href="#复杂数据类型" class="header-anchor">#</a> 复杂数据类型</h3> <ol><li><p><strong>联合类型</strong></p> <p>联合类型是给一个变量赋值为多种可能的类型，当未给该变量指定值的时候，只能调用该对象多种可能类型的共有的方法</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> variable<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
variable<span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">toStirng</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 此时只能调用string和number共有的方法，不然会报错，如果想忽略这个错误，见2.2</span>
variable <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
variable<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 赋值之后，就可以调用一些number的方法了</span>
</code></pre></div></li> <li><p><strong>字面量类型</strong></p> <p>字面量类型类似于枚举，定义一个类型的时候，某个变量若为该类型，则其值只能为这个类型中所定义的值</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">stringType</span> <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;2&quot;</span> <span class="token operator">|</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> stringTypeVariable<span class="token operator">:</span> stringType <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 该处会报错，因为stringType类型上并没有number1</span>
<span class="token keyword">let</span> stringTypeVariable<span class="token operator">:</span> stringType <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// 正常</span>
</code></pre></div></li></ol> <h2 id="断言"><a href="#断言" class="header-anchor">#</a> 断言</h2> <hr> <h3 id="as"><a href="#as" class="header-anchor">#</a> as</h3> <p>as 可以进行类型断言</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> n<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span>a <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="非空断言"><a href="#非空断言" class="header-anchor">#</a> 非空断言</h3> <p>说明：ts 编译器在编译的过程中，若发现某些值可能不存在，然而我们却给这些值赋值的时候，会报一个错，说明该值可能并不存在，从而造成值为 null，然后给 Null 的属性赋值，会造成空指针异常。这时候，我们可以使用非空断言，告诉 ts 该值一定存在，从而忽略掉这个错误</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> element<span class="token operator">:</span> HTMLElement <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 此时会报错</span>
element<span class="token operator">!</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;greend&quot;</span><span class="token punctuation">;</span> <span class="token comment">//这种写法就不会报错了</span>
</code></pre></div><h3 id="类型断言"><a href="#类型断言" class="header-anchor">#</a> 类型断言</h3> <p>说明：ts 编译器编译时，如果发现某个联合类型声明的变量未赋值，那么该变量只能调用联合类型的共有的方法，如果要给改变量设置类型断言，可按如下写法</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> variable<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span>variable<span class="token operator">!</span> <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 此处variable没有赋值，需要使用非空断言，同时，没有值，就不知道类型，所以也需要进行类型断言</span>
</code></pre></div><h3 id="双重断言"><a href="#双重断言" class="header-anchor">#</a> 双重断言</h3> <p>说明：如果出现上述的类型断言，但是实际上，想使用除了定义类型之外的类型，就可以使用双重断言</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> variable<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span>variable<span class="token operator">!</span> <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span>variable<span class="token operator">!</span> <span class="token keyword">as</span> <span class="token builtin">any</span> <span class="token keyword">as</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 强制定义variable的类型为bool类型</span>
</code></pre></div><h2 id="ts-函数"><a href="#ts-函数" class="header-anchor">#</a> ts 函数</h2> <hr> <h3 id="函数声明"><a href="#函数声明" class="header-anchor">#</a> 函数声明</h3> <p>ts 的函数声明中，入参出参，返回值均可定义类型</p> <p>具体格式如下</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// (arg1Type, arg2Type, ...) : returnType</span>
<span class="token keyword">let</span> func <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span> y<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 一般情况下，声明函数并不需要给函数添加类型，因为他本身可以自行推导，一般需要进类型标识的，是将函数当做变量来使用，例如</span>
<span class="token keyword">let</span> fn <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token keyword">const</span> sum<span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> fn<span class="token punctuation">;</span>
</code></pre></div><p>除此之外，还可在类型声明前面加上一个<code>？</code>进行<strong>参数可选</strong>的设置，即该号位置的参数可有可无</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> func <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> y<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// y是可选参数，可传可不传</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '1'  undefined</span>
</code></pre></div><h3 id="函数-this"><a href="#函数-this" class="header-anchor">#</a> 函数 this</h3> <p>ts 中，函数中的 this 必须要声明之后才能使用，否则会报错</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>
</code></pre></div><h3 id="函数重载"><a href="#函数重载" class="header-anchor">#</a> 函数重载</h3> <p><strong>函数重载 function overload</strong>，即为同一个函数提供多个函数类型定义来进行函数重载，而且，<strong>函数重载和函数声明必须保证连续写</strong>，不然就会报错</p> <ul><li><p>某些简单情况下，函数重载可以直接用或<code>|</code>语句替代</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> fun <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;it's a string&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">==</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;it's a number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// -------------上述函数可重载为下面的函数---------------------</span>
<span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;it's a string&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">==</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;it's a number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>某些复杂情况下，上面的这种简单写法就会出问题</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 例如有个需求，需要传入的x和y可以为string，也可以为number，但是x和y的类型必须一致</span>
<span class="token comment">// 如果按第一种写法</span>
<span class="token keyword">let</span> fun <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这种写法，并不会报错</span>

<span class="token comment">// -------------上述函数可重载为下面的函数---------------------</span>
<span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这种写法，会直接在IDE中报错，方便进行检查</span>
</code></pre></div></li></ul> <h2 id="类"><a href="#类" class="header-anchor">#</a> 类</h2> <hr> <h3 id="变量的定义"><a href="#变量的定义" class="header-anchor">#</a> 变量的定义</h3> <p>类中接受的参数，在 constructor 中，要先定义，不能直接 this</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token comment">// 需要对接收的参数进行定义，不然ts会报错</span>
  <span class="token keyword">public</span> x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>类的简易参考文档</p> <p>https://blog.csdn.net/johnZhangqi/article/details/105502226?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-0&amp;spm=1001.2101.3001.4242</p></blockquote> <h3 id="类的继承"><a href="#类的继承" class="header-anchor">#</a> 类的继承</h3> <p>继承使用关键字 extends，调用父类使用 super，super 即是调用父类的原型，子类继承父类的属性和方法，并且子类可以改写父类的属性和方法</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>_name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// constructor用于接收入参，例如在下面new Horse的时候就传进来了一个入参</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> _name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 父类的方法，子类没有重写</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Horse</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 注意点：super是写在constructor里面的，直接继承父类的name属性</span>
  <span class="token punctuation">}</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 子类可以重写父类的方法，会直接覆盖</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;newEat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 子类如果要调用父类的方法，可以直接用super.methodName的方式</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> horse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Horse</span><span class="token punctuation">(</span><span class="token string">&quot;horse&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
horse<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 此处调用的是覆盖后的子类自己的方法</span>
horse<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 因为子类没有重写该方法，所以直接调用的是父类的</span>
</code></pre></div><blockquote><p>参考文档：</p> <ul><li><p>关于类的继承以及各个修饰符对继承的影响</p> <p>https://blog.csdn.net/ddr66288/article/details/102119998</p></li> <li><p>关于 constructor 和 super</p> <p>https://www.jianshu.com/p/2f13ecb9a109</p></li></ul></blockquote> <h3 id="类的修饰符"><a href="#类的修饰符" class="header-anchor">#</a> 类的修饰符</h3> <p>ts 里面提供的修饰符共有三个，分别是</p> <ul><li><p>public（默认）：公有 在当前类里面、 子类 、类外面都可以访问</p></li> <li><p>protected：保护类型 在当前类里面、子类里面可以访问 ，在类外部没法访问</p></li> <li><p>private： 私有 在当前类里面可以访问，子类、类外部都没法访问</p></li> <li><p>readonly：只读属性</p> <table><thead><tr><th>修饰符</th> <th>当前类</th> <th>子类</th> <th style="text-align:left;">外部</th></tr></thead> <tbody><tr><td>public</td> <td>可访问</td> <td>可访问</td> <td style="text-align:left;">可访问</td></tr> <tr><td>protected</td> <td>可访问</td> <td>可访问</td> <td style="text-align:left;">不可访问</td></tr> <tr><td>private</td> <td>可访问</td> <td>不可访问</td> <td style="text-align:left;">不可访问</td></tr> <tr><td>readonly</td> <td></td> <td></td> <td style="text-align:left;"></td></tr></tbody></table></li></ul> <h3 id="静态属性-静态方法"><a href="#静态属性-静态方法" class="header-anchor">#</a> 静态属性 静态方法</h3> <ol><li><p>定义</p> <p>静态属性：这些属性存在于类本身上面而不是类的实例上，只能通过类.属性名称的方式来进行调用，而不能在实例上进行调用，静态方法同理，与之相对应的，存在于类的实例上的属性和方法叫<strong>成员属性</strong>和<strong>成员方法</strong></p></li> <li><p>说明</p> <p>简而言之，就是 static 标识符标识的属性或者方法，不会被子类继承，所以，子类点静态方法是会报错的，同时，静态方法也只存在于父类上，同时，<strong>无法使用 this 关键字</strong>，因为 this 关键字指向的是被实例化后的对象类</p></li> <li><p>代码示例</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>

  <span class="token keyword">static</span> sex<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 保护属性</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 实例方法</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">在奔跑</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">在工作</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//静态方法</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;print方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;print方法&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错，静态方法里无法直接调用当前类属性（只能调用静态属性）this.age是undefined</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;print方法&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 调用实例方法</span>
p<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 调用静态方法</span>
Person<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h3 id="多态"><a href="#多态" class="header-anchor">#</a> 多态</h3> <ol><li><p>定义</p> <p>父类定义一个方法不去实现，让继承它的子类去实现 每一个子类有不同的表现</p></li> <li><p>代码示例</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//具体吃什么  不知道   ，  具体吃什么?继承它的子类去实现 ，每一个子类的表现不一样</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;吃的方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;吃粮食&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;吃老鼠&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="抽象"><a href="#抽象" class="header-anchor">#</a> 抽象</h3> <ol><li><p>定义</p> <ul><li>抽象类是提供其他类继承的基类，<strong>不能直接被实例化</strong></li> <li>用 abstract 关键字定义抽象类和抽象方法，抽象类中的抽象方法<strong>不包含具体实现</strong>并且<strong>必须在派生类中实现</strong></li> <li>abstract 抽象方法<strong>只能放在抽象类里面</strong></li> <li>抽象类和抽象方法用来定义标准</li></ul></li> <li><p>说明</p> <p>简而言之，① 不能 new 出来；② 抽象类里面的抽象方法不包括实现，而且子类必须要实现该抽象方法；③ 抽象方法只能放在抽象类里；④ 抽象类里面可以放普通方法，子类可以选择不实现</p></li> <li><p>代码示例</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">abstract</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span> <span class="token comment">//抽象方法不包含具体实现并且必须在派生类中实现。</span>
  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;其他方法可以不实现&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这里这么写是错误的，因为抽象类不可以被实例</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//抽象类的子类必须实现抽象类里面的抽象方法，但是可以不实现run，因为run不是抽象方法</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;吃粮食&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;小白狗&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h2 id="接口"><a href="#接口" class="header-anchor">#</a> 接口</h2> <p><code>接口 interface</code></p> <hr> <blockquote><p>接口的详细文档</p> <p>https://yuzhiqiang.blog.csdn.net/article/details/54378607?utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.baidujs&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.baidujs</p></blockquote> <ol><li><p>定义</p> <ul><li>用来描述数据的形状（对象，类，函数等）</li> <li>接口中的东西都是抽象的，没有具体实现</li> <li>接口是为了实现<strong>多继承</strong></li> <li>关键字是<strong>implements</strong></li></ul></li> <li><p>接口<strong>interface</strong>和类型定义<strong>type</strong>的区别</p></li> <li><p>接口的函数类型</p> <ul><li><p>说明：接口可以用来描述 js 中的所有对象，函数也不例外，描述函数的时候，用括号包裹键值，写在冒号后面</p></li> <li><p>代码实现</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>speak<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// 如果是[]，则是用来约束对象或者数组，对应的是键:值</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Animal2</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// 如果是用来约束函数，那么键名要用()，对应的是 (参数):返回值</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> cat<span class="token operator">:</span> Animal <span class="token operator">=</span> <span class="token punctuation">{</span>
  speak<span class="token operator">:</span> <span class="token string">&quot;喵喵喵&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> dog<span class="token operator">:</span> <span class="token function-variable function">Animal2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;汪汪汪&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>此外注意点，如果接口约束函数的时候其中还有其他属性或方法，那么对应的需要将该属性或方法加上</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Animal2</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> t<span class="token operator">:</span> <span class="token function-variable function">any</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 此处如果不加any，下面会报错，因为t对应的是空函数，不能赋值</span>
t<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Dog&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> dog<span class="token operator">:</span> Animal2 <span class="token operator">=</span> t<span class="token punctuation">;</span>
</code></pre></div></li></ul></li></ol> <h2 id="泛型"><a href="#泛型" class="header-anchor">#</a> 泛型</h2> <p><code>泛型</code></p> <hr> <p><strong>泛型定义：</strong></p> <p><strong>说明：</strong></p> <p>泛型就是在使用的时候确定类型</p> <p><strong>示例</strong></p> <p>假设现在需要一个函数，传入一个数字和一个值，返回一个数组，数组长度为传入的数字长度，每个数组元素的值都为传入的值</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 记得函数的&lt;T&gt;要写在参数前</span>
<span class="token keyword">const</span> createArray <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>times<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Array</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> times<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 因为传入的value值不确定，只有在传递的时候才知道具体是什么值，故而需要用到泛型，写法为函数名后面接&lt;T&gt;, 并在对应参数后面表示T的含义，如上述中，value的类型就是</span>
<span class="token function">createArray</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">createArray</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">createArray</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ts-关键字"><a href="#ts-关键字" class="header-anchor">#</a> ts 关键字</h2> <blockquote><p>参考文档：https://juejin.cn/post/7034035155434110990</p></blockquote> <hr> <ol><li><code>typeof</code></li> <li><code>keyof</code></li> <li><code>in</code></li> <li><code>extends</code></li> <li><code>as</code></li> <li><code>infer</code></li></ol> <h2 id="类型兼容性"><a href="#类型兼容性" class="header-anchor">#</a> 类型兼容性</h2> <hr> <h2 id="record"><a href="#record" class="header-anchor">#</a> Record</h2> <p><code>Record&lt;K,T&gt;</code>构造具有给定类型<code>T</code>的一组属性<code>K</code>的类型。在将一个类型的属性映射到另一个类型的属性时，<code>Record</code>非常方便。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">IType</span> <span class="token operator">=</span> Rocord<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> obj<span class="token operator">:</span> IType <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;2&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 报错，此处应为string而非number</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">EmployeeType</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  fullname<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  role<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> employees<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">,</span> EmployeeType<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> fullname<span class="token operator">:</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span> role<span class="token operator">:</span> <span class="token string">&quot;Designer&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> fullname<span class="token operator">:</span> <span class="token string">&quot;Ibrahima Fall&quot;</span><span class="token punctuation">,</span> role<span class="token operator">:</span> <span class="token string">&quot;Developer&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> fullname<span class="token operator">:</span> <span class="token string">&quot;Sara Duckson&quot;</span><span class="token punctuation">,</span> role<span class="token operator">:</span> <span class="token string">&quot;Developer&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="装饰器"><a href="#装饰器" class="header-anchor">#</a> 装饰器</h2> <hr> <h3 id="类装饰器"><a href="#类装饰器" class="header-anchor">#</a> 类装饰器</h3> <p>ts 官方定义：装饰器是一种特殊类型的声明，它能够被附加到类声明，方法， 访问符，属性或参数上，装饰器使用 @expression 这种形式，expression 求值后必须为一个函数，它会在运行时被调用，被装饰的声明信息做为参数传入</p> <p>暂时没有看出来有啥用，先了解了再说，上代码</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>funtion <span class="token function">decoratorFun</span><span class="token punctuation">(</span>targetClass<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">{</span>		<span class="token comment">// 装饰器函数的入参是Person类</span>
  targetClass<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Leo'</span><span class="token punctuation">;</span>		<span class="token comment">// 装饰器上添加的属性和方法最后都可以直接调用到</span>
  targetClass<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'eat...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">decoratorFun</span></span>		<span class="token comment">// 装饰器为@加上函数名，本身是一个函数</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p<span class="token operator">:</span>Person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// Leo，此处就可以直接调用到了</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>eat<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// eat...</span>
</code></pre></div><h3 id="类装饰器工厂"><a href="#类装饰器工厂" class="header-anchor">#</a> 类装饰器工厂</h3> <p>简而言之，就是如果类装饰器声明的时候需要传参，那么可以采用类装饰器工厂的模式</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">decorateFactory</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 此处的名称应与装饰器名称一致</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">decorateFactoryCallback</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 既然装饰器函数是个函数，所以直接return一个function即可</span>
    x<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    x<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;eat...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">decorateFactory</span></span><span class="token punctuation">(</span><span class="token string">&quot;Leo&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p><strong>补充点：类装饰器直接返回新类替换掉原始的类</strong></p> <p>直接上代码</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">decoratorClass</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    eat<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// age是多出来的属性，原则上来说，新类必须要包含原始类的所有属性和方法，只能多，不能少是原则，如果少了name或者eat中的任何一个，该函数都会直接报错</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">decoratorClass</span></span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  eat<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 此处也留下一个疑点，为啥类里面最后结尾使用分号而不是逗号</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="属性装饰器"><a href="#属性装饰器" class="header-anchor">#</a> 属性装饰器</h3> <h3 id="参数装饰器"><a href="#参数装饰器" class="header-anchor">#</a> 参数装饰器</h3> <h3 id="装饰器的执行顺序"><a href="#装饰器的执行顺序" class="header-anchor">#</a> 装饰器的执行顺序</h3> <ol><li>类装饰器最后执行，对同一个类的不同装饰器而言，后写的装饰器先执行</li> <li>方法和方法中的参数装饰器，先执行参数装饰器，再执行方法装饰器</li> <li>方法装饰器和属性装饰器则按正常代码顺序，先写先执行</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html" class="prev">
        JS &amp; ES6+
      </a></span> <span class="next"><a href="/leo-blog/computer-science/Front-end/Node.html">
        Node
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/leo-blog/assets/js/app.bfe0a0b7.js" defer></script><script src="/leo-blog/assets/js/2.36229468.js" defer></script><script src="/leo-blog/assets/js/22.c16cfa9f.js" defer></script>
  </body>
</html>
