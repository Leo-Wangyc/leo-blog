<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Leo&#39;s Starship</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/leo-blog/assets/css/0.styles.6ec2a987.css" as="style"><link rel="preload" href="/leo-blog/assets/js/app.bfe0a0b7.js" as="script"><link rel="preload" href="/leo-blog/assets/js/2.36229468.js" as="script"><link rel="preload" href="/leo-blog/assets/js/24.be802471.js" as="script"><link rel="prefetch" href="/leo-blog/assets/js/10.d3ccb201.js"><link rel="prefetch" href="/leo-blog/assets/js/11.34ea13c9.js"><link rel="prefetch" href="/leo-blog/assets/js/12.100bdd4c.js"><link rel="prefetch" href="/leo-blog/assets/js/13.0196917d.js"><link rel="prefetch" href="/leo-blog/assets/js/14.e0de9719.js"><link rel="prefetch" href="/leo-blog/assets/js/15.bbbbc91e.js"><link rel="prefetch" href="/leo-blog/assets/js/16.894b3e9b.js"><link rel="prefetch" href="/leo-blog/assets/js/17.66638d45.js"><link rel="prefetch" href="/leo-blog/assets/js/18.519870b3.js"><link rel="prefetch" href="/leo-blog/assets/js/19.557679db.js"><link rel="prefetch" href="/leo-blog/assets/js/20.fce0f6ce.js"><link rel="prefetch" href="/leo-blog/assets/js/21.ce536719.js"><link rel="prefetch" href="/leo-blog/assets/js/22.c16cfa9f.js"><link rel="prefetch" href="/leo-blog/assets/js/23.666f621b.js"><link rel="prefetch" href="/leo-blog/assets/js/25.595306b9.js"><link rel="prefetch" href="/leo-blog/assets/js/26.195f319f.js"><link rel="prefetch" href="/leo-blog/assets/js/27.2a5318e4.js"><link rel="prefetch" href="/leo-blog/assets/js/28.8b21ba99.js"><link rel="prefetch" href="/leo-blog/assets/js/29.d4abc438.js"><link rel="prefetch" href="/leo-blog/assets/js/3.1ae439f9.js"><link rel="prefetch" href="/leo-blog/assets/js/30.35cd2f3c.js"><link rel="prefetch" href="/leo-blog/assets/js/31.472ee938.js"><link rel="prefetch" href="/leo-blog/assets/js/32.336b1f6a.js"><link rel="prefetch" href="/leo-blog/assets/js/4.b471a861.js"><link rel="prefetch" href="/leo-blog/assets/js/5.0770b70b.js"><link rel="prefetch" href="/leo-blog/assets/js/6.917bb234.js"><link rel="prefetch" href="/leo-blog/assets/js/7.3c7496cf.js"><link rel="prefetch" href="/leo-blog/assets/js/8.415d7f3c.js"><link rel="prefetch" href="/leo-blog/assets/js/9.5080fa6c.js">
    <link rel="stylesheet" href="/leo-blog/assets/css/0.styles.6ec2a987.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/leo-blog/" class="home-link router-link-active"><!----> <span class="site-name">Leo's Starship</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/leo-blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide" class="dropdown-title"><span class="title">Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide" class="mobile-dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/leo-blog/" class="nav-link">
  Home
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/leo-blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide" class="dropdown-title"><span class="title">Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide" class="mobile-dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/leo-blog/" class="nav-link">
  Home
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Computer Science</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>C</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Front End</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/leo-blog/computer-science/Front-end/FrontEndTheory.html" class="sidebar-link">Front-End Theory</a></li><li><a href="/leo-blog/computer-science/Front-end/HTML5.html" class="sidebar-link">HTML</a></li><li><a href="/leo-blog/computer-science/Front-end/CSS.html" class="sidebar-link">CSS</a></li><li><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html" class="sidebar-link">JS &amp; ES6+</a></li><li><a href="/leo-blog/computer-science/Front-end/TypeScript.html" class="sidebar-link">TypeScript</a></li><li><a href="/leo-blog/computer-science/Front-end/Node.html" class="sidebar-link">Node</a></li><li><a href="/leo-blog/computer-science/Front-end/Vue.html" class="sidebar-link">Vue</a></li><li><a href="/leo-blog/computer-science/Front-end/React.html" class="sidebar-link">React</a></li><li><a href="/leo-blog/computer-science/Front-end/Miniapp.html" class="sidebar-link">Mini App</a></li><li><a href="/leo-blog/computer-science/Front-end/Webpack.html" aria-current="page" class="active sidebar-link">Webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/Webpack.html#_1-1-早期模块化实现" class="sidebar-link">1.1 早期模块化实现</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/Webpack.html#_1-2-模块化优点" class="sidebar-link">1.2 模块化优点</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/Webpack.html#_1-3-模块化进化过程" class="sidebar-link">1.3 模块化进化过程</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/Webpack.html#_3-1-语义化版本" class="sidebar-link">3.1 语义化版本</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/Webpack.html#_4-1-核心概念" class="sidebar-link">4.1 核心概念</a></li></ul></li><li><a href="/leo-blog/computer-science/Front-end/ComponentDesign.html" class="sidebar-link">Component Design</a></li><li><a href="/leo-blog/computer-science/Front-end/CloudDevelopment.html" class="sidebar-link">Cloud Development</a></li><li><a href="/leo-blog/computer-science/Front-end/project.html" class="sidebar-link">Real Project</a></li><li><a href="/leo-blog/computer-science/Front-end/special.html" class="sidebar-link">Special</a></li></ul></section></li><li><a href="/leo-blog/computer-science/algorithm.html" class="sidebar-link">Algorithm</a></li><li><a href="/leo-blog/computer-science/ComputerScience.html" class="sidebar-link">Computer Tech</a></li><li><a href="/leo-blog/computer-science/Git.html" class="sidebar-link">Git</a></li><li><a href="/leo-blog/computer-science/vue-press.html" class="sidebar-link">Vue Press</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>English</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Ecnomics</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>Webpack</p> <h1 id="_1-前端模块化"><a href="#_1-前端模块化" class="header-anchor">#</a> 1 前端模块化</h1> <h2 id="_1-1-早期模块化实现"><a href="#_1-1-早期模块化实现" class="header-anchor">#</a> 1.1 早期模块化实现</h2> <p>由于 js 的语言特性，var 变量是直接挂载到 window 的顶级对象上，早期写 js 代码的时候，用 export 导出，再在总的 app.js 中导入的时候，很容易就出现了变量命名冲突的问题，而当初，js 并没有 let 这种定义特定作用域的语法，所以，如果当时要解决命名冲突的问题，往往人们使用导出一个对象的方式</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Leo&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>这样，导入该文件后，就可以直接使用 a.name，a.age 调用属性，解决变量命名冲突的问题</p> <p>但是，这种方法也有一个弊端，那就是整个对象完全暴露在外，可以通过点属性，获取任意属性的值并进行修改，十分不安全，考虑到函数具有<strong>单独的作用域</strong>，于是，早起的模块化逻辑就出现了，即使用——<strong>立即执行函数</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">window</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 2.使用函数自调用，形成一个专属作用域，并接受window全局对象</span>
  <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;Leo&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">introduce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;My name is&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  window<span class="token punctuation">.</span>introduce <span class="token operator">=</span> introduce<span class="token punctuation">;</span> <span class="token comment">// 3.将函数作用域内需要暴露出去的属性或者方法，挂载到window上</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.传入window全局对象</span>
</code></pre></div><h2 id="_1-2-模块化优点"><a href="#_1-2-模块化优点" class="header-anchor">#</a> 1.2 模块化优点</h2> <ul><li>作用域封装</li> <li>代码重用</li> <li>解除耦合</li></ul> <h2 id="_1-3-模块化进化过程"><a href="#_1-3-模块化进化过程" class="header-anchor">#</a> 1.3 模块化进化过程</h2> <blockquote><p>详细的模块化语法可见 ES6.md 中的模块化笔记</p></blockquote> <ul><li>commonJs</li> <li>AMD</li> <li>ES6 Module（export/ import）</li></ul> <h1 id="_2-webpack-打包机制"><a href="#_2-webpack-打包机制" class="header-anchor">#</a> 2 Webpack 打包机制</h1> <blockquote><p>先简单讲一下打包的原理，关于 webpack 的源码，可后续做笔记补充！</p></blockquote> <p>Webpack 的打包机制其实和 1.1 中所提到的立即执行函数是一样的！</p> <p>其中打包过程为</p> <ol><li><strong>从入口文件开始，分析整个应用的依赖树</strong>，入口文件中会 import 各种项目中的文件，层层依赖相套，webpack 要做的，就是分析，并整理成一个依赖树</li> <li><strong>将每个依赖模块包装起来，放到一个数组中等待调用</strong>，按照上面的说法，webpack 本质是一个立即执行函数，那么，依赖树数组，就会是该立即执行函数的入参</li> <li><strong>实现模块加载的方法，并把它放到模块执行的环境中，确保模块间可以互相调用</strong></li> <li><strong>把执行入口文件的逻辑放在一个函数表达式中，并立即执行这个函数</strong>，由此，便会开始不断层层调用，实现项目的运行</li></ol> <p>主要打包过程代码展示：<em>结合 1.1 中立即执行函数看，更容易懂</em></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>	<span class="token comment">// 本身是一个立即执行函数</span>
  <span class="token keyword">var</span> installedModules <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>	<span class="token comment">// 设置一个对象，用于存储已经加载过的模块内容</span>
  <span class="token keyword">function</span> <span class="token function">_webpack_require_</span><span class="token punctuation">(</span><span class="token parameter">moduled</span><span class="token punctuation">)</span><span class="token punctuation">{</span>	<span class="token comment">// 核心内容，用于检查模块是否加载过，若加载过，返回，若没有，则将该模块放进installedModules中，防止二次加载，同时，执行该模块</span>
    <span class="token comment">/*code*/</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// other code content...</span>
  <span class="token keyword">return</span> <span class="token function">_webpack_require_</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>	<span class="token comment">// entry file 返回值是入口文件，此时webpack将会直接调用入口文件</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">*</span>modules array<span class="token operator">*</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>具体的_webpack<em>require</em>(moduleid)函数就不细致展开写了，详情可以参考视频资料</p> <blockquote><p>webpack 课程，第 55 分钟开始</p> <p>https://www.bilibili.com/video/BV1a741197Hn/?spm_id_from=333.788.recommend_more_video.-1</p></blockquote> <h1 id="_3-package-json"><a href="#_3-package-json" class="header-anchor">#</a> 3 package.json</h1> <h2 id="_3-1-语义化版本"><a href="#_3-1-语义化版本" class="header-anchor">#</a> 3.1 语义化版本</h2> <ul><li><p>^version：保证中版本和小版本</p> <p>^1.0.1 --&gt; 1.x.x</p></li> <li><p>~version：保证小版本</p> <p>^1.0.1 --&gt; 1.0.x</p></li></ul> <h1 id="_4-webpack-config-json"><a href="#_4-webpack-config-json" class="header-anchor">#</a> 4 webpack.config.json</h1> <h2 id="_4-1-核心概念"><a href="#_4-1-核心概念" class="header-anchor">#</a> 4.1 核心概念</h2> <ol><li><p>webpack 的默认配置文件是<strong>webpack.config.json</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 整体一览------------------------------------</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 指定输出的目录，目录必须为绝对路径，不能是相对路径</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;main.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 指定输出的文件名</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">&quot;source-map&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 例如此处，先执行css-loader再实行style-loader</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>entry</strong></p> <p>用于指定 webpack 的入口文件，从哪个文件开始打包，如果不设置，则默认为 src/index.js</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>output</strong></p> <p>用于指定项目打包的输出，默认为 dist</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 		<span class="token comment">// 指定输出的目录，目录必须为绝对路径，不能是相对路径</span>
  <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'main.js'</span><span class="token punctuation">,</span> 	<span class="token comment">// 指定输出的文件名</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><strong>mode</strong></p> <p>代表当前编译的环境</p> <p>有三个值【none, development, production】，默认为 production，会对代码进行压缩，development 则不会</p></li> <li><p><strong>devtool</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
</code></pre></div></li> <li><p><strong>module</strong></p> <p>webpack 只能打包 js 和 json 文件，其他类型，如 css, sass, less 等需要编译器协助打包，前提，<strong>需要先下载依赖包 style-loader 和 css-loader</strong></p> <ul><li><p>rules</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 用于给指定文件后缀名的文件添加loader协助编译，loader执行顺序从右到左</span>
<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 例如此处，先执行css-loader再实行style-loader</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/leo-blog/computer-science/Front-end/Miniapp.html" class="prev">
        Mini App
      </a></span> <span class="next"><a href="/leo-blog/computer-science/Front-end/ComponentDesign.html">
        Component Design
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/leo-blog/assets/js/app.bfe0a0b7.js" defer></script><script src="/leo-blog/assets/js/2.36229468.js" defer></script><script src="/leo-blog/assets/js/24.be802471.js" defer></script>
  </body>
</html>
