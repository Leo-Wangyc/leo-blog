<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS&amp;ES6+ | Leo&#39;s Starship</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/leo-blog/assets/css/0.styles.6ec2a987.css" as="style"><link rel="preload" href="/leo-blog/assets/js/app.bfe0a0b7.js" as="script"><link rel="preload" href="/leo-blog/assets/js/2.36229468.js" as="script"><link rel="preload" href="/leo-blog/assets/js/19.557679db.js" as="script"><link rel="prefetch" href="/leo-blog/assets/js/10.d3ccb201.js"><link rel="prefetch" href="/leo-blog/assets/js/11.34ea13c9.js"><link rel="prefetch" href="/leo-blog/assets/js/12.100bdd4c.js"><link rel="prefetch" href="/leo-blog/assets/js/13.0196917d.js"><link rel="prefetch" href="/leo-blog/assets/js/14.e0de9719.js"><link rel="prefetch" href="/leo-blog/assets/js/15.bbbbc91e.js"><link rel="prefetch" href="/leo-blog/assets/js/16.894b3e9b.js"><link rel="prefetch" href="/leo-blog/assets/js/17.66638d45.js"><link rel="prefetch" href="/leo-blog/assets/js/18.519870b3.js"><link rel="prefetch" href="/leo-blog/assets/js/20.fce0f6ce.js"><link rel="prefetch" href="/leo-blog/assets/js/21.ce536719.js"><link rel="prefetch" href="/leo-blog/assets/js/22.c16cfa9f.js"><link rel="prefetch" href="/leo-blog/assets/js/23.666f621b.js"><link rel="prefetch" href="/leo-blog/assets/js/24.be802471.js"><link rel="prefetch" href="/leo-blog/assets/js/25.595306b9.js"><link rel="prefetch" href="/leo-blog/assets/js/26.195f319f.js"><link rel="prefetch" href="/leo-blog/assets/js/27.2a5318e4.js"><link rel="prefetch" href="/leo-blog/assets/js/28.8b21ba99.js"><link rel="prefetch" href="/leo-blog/assets/js/29.d4abc438.js"><link rel="prefetch" href="/leo-blog/assets/js/3.1ae439f9.js"><link rel="prefetch" href="/leo-blog/assets/js/30.35cd2f3c.js"><link rel="prefetch" href="/leo-blog/assets/js/31.472ee938.js"><link rel="prefetch" href="/leo-blog/assets/js/32.336b1f6a.js"><link rel="prefetch" href="/leo-blog/assets/js/4.b471a861.js"><link rel="prefetch" href="/leo-blog/assets/js/5.0770b70b.js"><link rel="prefetch" href="/leo-blog/assets/js/6.917bb234.js"><link rel="prefetch" href="/leo-blog/assets/js/7.3c7496cf.js"><link rel="prefetch" href="/leo-blog/assets/js/8.415d7f3c.js"><link rel="prefetch" href="/leo-blog/assets/js/9.5080fa6c.js">
    <link rel="stylesheet" href="/leo-blog/assets/css/0.styles.6ec2a987.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/leo-blog/" class="home-link router-link-active"><!----> <span class="site-name">Leo's Starship</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/leo-blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide" class="dropdown-title"><span class="title">Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide" class="mobile-dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/leo-blog/" class="nav-link">
  Home
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/leo-blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide" class="dropdown-title"><span class="title">Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide" class="mobile-dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/leo-blog/" class="nav-link">
  Home
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Computer Science</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>C</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Front End</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/leo-blog/computer-science/Front-end/FrontEndTheory.html" class="sidebar-link">Front-End Theory</a></li><li><a href="/leo-blog/computer-science/Front-end/HTML5.html" class="sidebar-link">HTML</a></li><li><a href="/leo-blog/computer-science/Front-end/CSS.html" class="sidebar-link">CSS</a></li><li><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html" aria-current="page" class="active sidebar-link">JS &amp; ES6+</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#js-的组成" class="sidebar-link">Js 的组成</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#严格模式" class="sidebar-link">严格模式</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#对象扩展" class="sidebar-link">对象扩展</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#变量扩展" class="sidebar-link">变量扩展</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#函数扩展" class="sidebar-link">函数扩展</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#模板字符串" class="sidebar-link">模板字符串</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#解构赋值" class="sidebar-link">解构赋值</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#for-in-与-for-of" class="sidebar-link">for...in 与 for...of</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#promise" class="sidebar-link">Promise</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#async-await" class="sidebar-link">Async, Await</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#try-catch-finally" class="sidebar-link">try...catch...finally</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#类" class="sidebar-link">类</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#数组方法" class="sidebar-link">数组方法</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#字符串方法" class="sidebar-link">字符串方法</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#settimeout-setinterval" class="sidebar-link">setTimeout&amp;setInterval</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#throw" class="sidebar-link">throw</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#map-set" class="sidebar-link">Map&amp;Set</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#proxy-reflect" class="sidebar-link">Proxy&amp;Reflect</a></li><li class="sidebar-sub-header"><a href="/leo-blog/computer-science/Front-end/JS&amp;ES6+.html#模块化语法" class="sidebar-link">模块化语法</a></li></ul></li><li><a href="/leo-blog/computer-science/Front-end/TypeScript.html" class="sidebar-link">TypeScript</a></li><li><a href="/leo-blog/computer-science/Front-end/Node.html" class="sidebar-link">Node</a></li><li><a href="/leo-blog/computer-science/Front-end/Vue.html" class="sidebar-link">Vue</a></li><li><a href="/leo-blog/computer-science/Front-end/React.html" class="sidebar-link">React</a></li><li><a href="/leo-blog/computer-science/Front-end/Miniapp.html" class="sidebar-link">Mini App</a></li><li><a href="/leo-blog/computer-science/Front-end/Webpack.html" class="sidebar-link">Webpack</a></li><li><a href="/leo-blog/computer-science/Front-end/ComponentDesign.html" class="sidebar-link">Component Design</a></li><li><a href="/leo-blog/computer-science/Front-end/CloudDevelopment.html" class="sidebar-link">Cloud Development</a></li><li><a href="/leo-blog/computer-science/Front-end/project.html" class="sidebar-link">Real Project</a></li><li><a href="/leo-blog/computer-science/Front-end/special.html" class="sidebar-link">Special</a></li></ul></section></li><li><a href="/leo-blog/computer-science/algorithm.html" class="sidebar-link">Algorithm</a></li><li><a href="/leo-blog/computer-science/ComputerScience.html" class="sidebar-link">Computer Tech</a></li><li><a href="/leo-blog/computer-science/Git.html" class="sidebar-link">Git</a></li><li><a href="/leo-blog/computer-science/vue-press.html" class="sidebar-link">Vue Press</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>English</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Ecnomics</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js-es6"><a href="#js-es6" class="header-anchor">#</a> JS&amp;ES6+</h1> <h2 id="js-的组成"><a href="#js-的组成" class="header-anchor">#</a> Js 的组成</h2> <ul><li>ECMAScript</li> <li>DOM</li> <li>BOM</li></ul> <h2 id="严格模式"><a href="#严格模式" class="header-anchor">#</a> 严格模式</h2> <blockquote><p>严格模式 <em>strict model</em></p></blockquote> <p>严格模式语法</p> <ul><li><p>若是整个文件都使用，则定义在文件第一行，若仅在某一函数中使用，则定义在该函数内的第一行</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span> <span class="token comment">//全局</span>

<span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span> <span class="token comment">//仅在函数内部</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>严格模式区别</p> <ol><li><p>严格模式下，不允许未声明就直接赋值</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// ok</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// error</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// ok</span>
</code></pre></div></li> <li><p>严格模式下，不允许属性重名</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// ok</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// error</span>
</code></pre></div></li> <li><p>待补充</p></li></ol></li></ul> <h2 id="对象扩展"><a href="#对象扩展" class="header-anchor">#</a> 对象扩展</h2> <hr> <h3 id="对象属性描述符"><a href="#对象属性描述符" class="header-anchor">#</a> 对象属性描述符</h3> <p>对象内的每一个属性都有自己对应的描述符，分别对应一些不同的功能</p> <ul><li><p><strong>value</strong></p> <p>value 即对象的值</p></li> <li><p><strong>writable</strong></p> <p>决定了是否可以修改属性的值</p></li> <li><p><strong>configurable</strong></p> <p>决定了是否可以配置该属性的属性描述符，即是否可以通过 defineProperty(…)方法来修改该属性描述符，同时，configurable: false 还会<strong>禁止删除</strong>这个属性</p></li> <li><p><strong>enumerable</strong></p> <p>控制属性是否会出现在对象的属性枚举中，例如，若为 false，则 for..in 循环会忽略掉该属性</p></li></ul> <h3 id="getownpropertydescriptor"><a href="#getownpropertydescriptor" class="header-anchor">#</a> getOwnPropertyDescriptor</h3> <ul><li><p><strong>说明</strong>：</p> <p>Object.getOwnPropertyDescriptor 用于获取某一属性的描述符，返回值是描述符对象</p></li> <li><p><strong>语法</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> property<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  { value: 123, writable: true, enumerable: true, configurable: true }</span>
</code></pre></div></li></ul> <h3 id="getownpropertydescriptors"><a href="#getownpropertydescriptors" class="header-anchor">#</a> getOwnPropertyDescriptors</h3> <ul><li><p><strong>说明</strong>：</p> <p>Object.getOwnPropertyDescriptor 用于获取某一对象的全部属性（<strong>不包含继承过来的属性</strong>）描述符，返回值是描述符对象，与上面的区别是最后多了一个 s</p></li> <li><p><strong>语法</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  { foo:{ value: 123, writable: true, enumerable: true, configurable: true } }</span>
</code></pre></div></li></ul> <h3 id="object-defineproperty"><a href="#object-defineproperty" class="header-anchor">#</a> Object.defineProperty</h3> <ul><li><p><strong>说明</strong>：</p> <p>Object.defineProperty 用于设置对象中某一属性的属性描述符，若属性的属性描述符中 configurable 为 false，则该方法会失效，同时，里面可以设置 get 和 set 方法，当外部取值和修改值的时候自动触发两个方法</p></li> <li><p><strong>语法</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> property<span class="token punctuation">,</span> descriptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> foo<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;获取了值&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;设置了值&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>foo<span class="token punctuation">;</span> <span class="token comment">// '获取了值'</span>
obj<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token number">456</span><span class="token punctuation">;</span> <span class="token comment">// '设置了值'</span>
</code></pre></div></li></ul> <h3 id="object-create"><a href="#object-create" class="header-anchor">#</a> Object.create</h3> <ul><li><p><strong>说明</strong>：</p> <p>Object.create 用于创建一个新的对象并添加新的属性，可以用来实现<strong>对象的继承</strong></p></li> <li><p><strong>语法</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> newProperty<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>	<span class="token comment">// 这里obj2就继承了obj的所有属性，并添加上了新的属性，obj中的属性将会全部存在于obj2的__proto__中</span>
</code></pre></div></li> <li><p><strong>与 new Object 继承的区别</strong></p> <ul><li><p>new object 实现的继承，父对象的属性会直接添加到子类中，子类可以直接通过点属性(.xxx)的方式点出来，继承的属性存在在子类上</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// new Object() 方式创建</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">rep</span><span class="token operator">:</span> <span class="token string">&quot;apple&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {rep: &quot;apple&quot;}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>rep<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {rep: &quot;apple&quot;}</span>
</code></pre></div></li> <li><p>而 create 实现的继承，父对象的属性会添加到子类的原型上，子类也可以直接点出来，但是继承的属性不会存在于子类上</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Object.create() 方式创建</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">rep</span><span class="token operator">:</span> <span class="token string">&quot;apple&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {rep: &quot;apple&quot;}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>rep<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {rep: &quot;apple&quot;}</span>
</code></pre></div></li></ul></li></ul> <h3 id="obj-hasownproperty"><a href="#obj-hasownproperty" class="header-anchor">#</a> obj.hasOwnProperty</h3> <ul><li><p>说明</p> <p>用于判断对象自身是否存在某一<strong>非继承</strong>的属性</p></li> <li><p>语法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Say Hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

foo<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayGoodBy</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Say Good By&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> myPro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myPro<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// foo</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myPro<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myPro<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;toString&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myPro<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;hasOwnProperty&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// fasle</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myPro<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;sayHi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myPro<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;sayGoodBy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;sayGoodBy&quot;</span> <span class="token keyword">in</span> myPro<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div></li></ul> <h3 id="in-关键字"><a href="#in-关键字" class="header-anchor">#</a> in 关键字</h3> <p>可以用 in 进行循环，也可以用于做一些判断</p> <ol><li><p><strong>用作循环的情况</strong></p> <p>用作循环即是 for..in 循环，可以实现类似数组 map 的功能，但是 for..in 可以循环对象，也可以循环数组</p> <ul><li><p>用作循环数组的时候，循环出来的内容是<strong>数组的 id</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Jerry&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bob&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> arr2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">// 0 1 2</span>
</code></pre></div></li> <li><p>用作循环对象的时候，循环出来的内容是<strong>对象的 Key</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;leo&quot;</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token string">&quot;180&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">// name  height</span>
</code></pre></div></li></ul></li> <li><p><strong>用作判断某一个值是否在数组/对象内</strong></p> <p>注意，用于判断的时候，同样遵循上述的原则，数组为 id，对象为 key</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span> <span class="token keyword">in</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token keyword">in</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;leo&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">18</span> <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span> <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true, 同时要注意，此处的key必须为字符串格式，若不加''，则会判断为变量</span>
</code></pre></div></li></ol> <blockquote><p>参考文档：</p> <p>https://www.cnblogs.com/memphis-f/p/12073013.html</p></blockquote> <h2 id="变量扩展"><a href="#变量扩展" class="header-anchor">#</a> 变量扩展</h2> <hr> <h3 id="let-const"><a href="#let-const" class="header-anchor">#</a> let, const</h3> <ul><li><p>var 所造成的一些问题</p> <ol><li>变量提升</li> <li>允许同名变量多次定义</li> <li>全局变量污染</li> <li>作用域为全局</li></ol></li> <li><p>Const 常量</p> <p>常量只要保证地址不改变即可，若为值类型，则值不可变，若为引用类型，只要地址不变，堆内容改变不会报错</p></li></ul> <h3 id="const-的解析语法"><a href="#const-的解析语法" class="header-anchor">#</a> const 的解析语法</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// item中有date字段，将其重新赋值给scheduleDate</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> subHisId <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> deptId <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">scheduleDate</span><span class="token operator">:</span> date <span class="token operator">=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
</code></pre></div><h2 id="函数扩展"><a href="#函数扩展" class="header-anchor">#</a> 函数扩展</h2> <hr> <h3 id="arguments"><a href="#arguments" class="header-anchor">#</a> arguments</h3> <p>函数中隐式具有 arguments 属性，arguments 是一个类数组对象，其中存储着函数的全部入参，因为其类数组的特性，其不具有 slice 等数组方法，但是可以使用如下方式转换成数组，或者调用数组方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错，其为类数组，不具有数组方法</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, '3']</span>
<span class="token punctuation">}</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="箭头函数"><a href="#箭头函数" class="header-anchor">#</a> 箭头函数</h3> <p><code>arrow function</code></p> <ul><li><p>特点</p> <ol><li>没有 this</li> <li>没有 arguments</li></ol></li> <li><p><strong>传统方式的 this 指向</strong></p> <p>箭头函数可以改变 this 的指向，按照传统的方式，谁调用该函数，该函数的 this 就指向谁，如下</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
  <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在上述例子中，setInterval 并没有对象调用，故其 this 默认指向 window，所以执行 a++的时候，并不会改变 add 函数中的 a 的值，而是改变的外部 a 的值</p></li> <li><p><strong>箭头函数的 this 指向</strong></p> <p><strong>始终指向自身所在的代码块的对象</strong></p></li></ul> <h3 id="call-apply-bind"><a href="#call-apply-bind" class="header-anchor">#</a> call,apply,bind</h3> <blockquote><p>参考视频：</p> <p>https://www.bilibili.com/video/BV1XX4y1w7R6?from=search&amp;seid=9741743272953119387</p></blockquote> <p>这三个函数本质上都是一样的，都是函数方法，用于改变函数的 this 的指向，区别及使用方法如下</p> <ul><li><p>函数用法</p> <ol><li><p><strong>call</strong></p> <p>函数方法，用于改变 this 指向，且会**直接调用！**无返回值</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> cat <span class="token operator">=</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span> <span class="token string">'喵喵'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'汪汪'</span><span class="token punctuation">,</span>
  <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>		<span class="token comment">// 注意，此处不可以使用箭头函数，箭头函数会改变This指向到该函数定义的时候的作用域指向的对象，而js中作用域仅有函数才会存在，对象不存在作用域，所以，dog对象没有作用域，sayName的外部作用域就是window，所以this会指向window</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'My name is'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">eat</span><span class="token punctuation">(</span>food1<span class="token punctuation">,</span> food2<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I like eat'</span> <span class="token operator">+</span> food1 <span class="token operator">+</span> <span class="token string">'and'</span> <span class="token operator">+</span> food2<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// call方法会把函数中的This指向后面的第一个参数</span>
dog<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>cat<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// My name is 喵喵</span>
dog<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>cat<span class="token punctuation">,</span> <span class="token string">'鱼'</span><span class="token punctuation">,</span> <span class="token string">'猫饼干'</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p><strong>apply</strong></p> <p>与 call 其他基本一致，函数也会<strong>直接调用</strong>，但是，apply 传参接受的参数是一个数组，无返回值</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//......  // 和上面一致</span>
dog<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>cat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;鱼&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;猫饼干&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>bind</strong></p> <p>bind 与 call 和 apply 不同，bind<strong>不会直接调用函数！</strong>，而是把函数当做返回值，方便后续持续调用，而省略掉每次要改 this 都要 call 一次的问题</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// .......   // 其他一致</span>
<span class="token keyword">let</span> fun <span class="token operator">=</span> dog<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>cat<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol></li> <li><p>函数实现原理</p> <p>实现原理很简单，只需要把需要执行的函数挂载到需要绑定 this 的对象上，然后进行相关操作后，删除掉对象上的函数即可，以 call 和 bind 为例</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// call</span>
<span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> gender <span class="token operator">=</span> female<span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token literal-property property">gender</span><span class="token operator">:</span> <span class="token string">&quot;male&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">logInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">,</span> gender<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 原生方法：</span>
<span class="token function">logInfo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1, female  2, male</span>

<span class="token comment">// 自己实现一个call</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myCall</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 第一步， 将函数挂载到obj上，此时的this是调用myCall方法的函数本身。例如，logInfo.myCall，那么this和obj.func就是logInfo</span>
  obj<span class="token punctuation">.</span>func <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token comment">// 第二步，因为call函数会自调用，所以直接调用该函数即可，此时因为是obj调用的，所以函数内的this也指向obj</span>
  obj<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 第三步，函数执行完毕后，删除该函数，保持obj不改变</span>
  <span class="token keyword">delete</span> obj<span class="token punctuation">.</span>func<span class="token punctuation">;</span>
  <span class="token comment">// 最后，因为call函数没有返回值，所以直接return即可</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 自己实现一个bind</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myBind</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 第一步，与上述所说一致，挂载函数到obj上</span>
  obj<span class="token punctuation">.</span>func <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token comment">// 第二步，bind不调用函数，而是返回一个函数，所以，直接返回一个函数出去</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 第三步，逻辑同上</span>
    obj<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 最后别忘了删除</span>
    <span class="token keyword">delete</span> obj<span class="token punctuation">.</span>func<span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="模板字符串"><a href="#模板字符串" class="header-anchor">#</a> 模板字符串</h2> <p>即通过反引号，添加$符号表示变量的方式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">&quot;leo&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> describe <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><h2 id="解构赋值"><a href="#解构赋值" class="header-anchor">#</a> 解构赋值</h2> <h3 id="从对象中解构"><a href="#从对象中解构" class="header-anchor">#</a> 从对象中解构</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 对象可任意解构</span>
<span class="token keyword">const</span> demoObj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;peter&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> demoObj<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 18</span>
</code></pre></div><h3 id="从对象解构并重命名"><a href="#从对象解构并重命名" class="header-anchor">#</a> 从对象解构并重命名</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> demoObj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;peter&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> t <span class="token punctuation">}</span> <span class="token operator">=</span> demoObj<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ''</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// peter</span>
</code></pre></div><h3 id="从数组中解构"><a href="#从数组中解构" class="header-anchor">#</a> 从数组中解构</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 数组为按顺序解构</span>
<span class="token keyword">const</span> demoArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;peter&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bill&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>bill<span class="token punctuation">,</span> peter<span class="token punctuation">]</span> <span class="token operator">=</span> demoArr<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bill<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'peter'</span>
</code></pre></div><h2 id="for-in-与-for-of"><a href="#for-in-与-for-of" class="header-anchor">#</a> for...in 与 for...of</h2> <hr> <h3 id="for-in"><a href="#for-in" class="header-anchor">#</a> for...in</h3> <p><strong>特点</strong></p> <ol><li>for...in 可以遍历<strong>对象、数组</strong></li> <li>for...in 中遍历的索引为<strong>字符串</strong>类型</li> <li>使用 for in 会遍历数组所有的可枚举属性，包括原型上的方法</li> <li>for...in 更适合用来遍历对象</li></ol> <p><strong>代码实现</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 数组遍历</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">method</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token keyword">in</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1 string</span>
<span class="token comment">// 2 string</span>
<span class="token comment">// 4 string</span>
<span class="token comment">// ....</span>
<span class="token comment">// f(){console.log(this.length)} string	// 此为原型上的方法，也会被遍历出来</span>

<span class="token comment">// 对象遍历</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">method</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 'name' '张三'</span>
<span class="token comment">// 'age' 22</span>
<span class="token comment">// 'method' f(){console.log(this)}</span>
</code></pre></div><h3 id="for-of"><a href="#for-of" class="header-anchor">#</a> for...of</h3> <p><strong>特点</strong></p> <ol><li>for...of 可以遍历<strong>数组</strong></li> <li>for...of 不会遍历原型上的方法</li></ol> <p><strong>代码实现</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> myArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
myArray<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;数组&quot;</span><span class="token punctuation">;</span>
myArray<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token keyword">of</span> myArray<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1 number</span>
<span class="token comment">// 2 number</span>
<span class="token comment">// 4 number</span>
<span class="token comment">// ...</span>
<span class="token comment">// 7 number</span>
</code></pre></div><h2 id="promise"><a href="#promise" class="header-anchor">#</a> Promise</h2> <hr> <h3 id="promise-简介"><a href="#promise-简介" class="header-anchor">#</a> Promise 简介</h3> <ul><li><p>promise 用来执行异步操作，有效地消除了回调地狱，并且增加了错误捕获机制，其本质上是一个函数对象，会<strong>自行调用</strong>，自身拥有着<strong>all、reject、resolve</strong>等方法，其原型上有<strong>then、catch</strong>等方法。示例如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//做一些异步操作</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;执行了Promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;resolve中的参数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在此案例中，浏览器在 2000ms 后会直接执行 setTimeout 函数</p></li> <li><p>promise 所拥有的特性：</p> <ol><li>promise 一定会返回一个结果</li> <li>promise 还是基于回调的</li> <li>当使用 promise 的时候会传入一个执行器，此执行器是立即执行，即 new Promise(fun(){})括号中的 fun(){}是直接执行的</li> <li>当前 executor 给了两个函数可以来描述当前 promise 的状态，分别是 resolve 和 reject</li> <li>promise 中有三个状态：成功态，失败态，等待态（默认为等待态）</li> <li>如果调用 resolve 会走到成功态，如果调用 reject 或者发生异常会走失败态</li> <li>promise 一旦状态变化后不能更改，例如，调了 resolve 之后，再调 reject 是不会生效的，同理，throw Error 之后再 resolve 也是不会生效的</li></ol></li> <li><p>Resolve, reject</p> <p>分别对应成功与失败所调用的函数</p></li> <li><p><strong>注意点！！！</strong></p> <p>！！！<strong>注意，promise 会直接自调用</strong>，所以一定要确保其中的改赋值的变量都已赋值！！！</p></li></ul> <h3 id="promise-在实际函数中的运用"><a href="#promise-在实际函数中的运用" class="header-anchor">#</a> promise 在实际函数中的运用</h3> <p>因为<strong>只有 promise 才具有.then 的方法</strong>，所以函数<strong>必须返回一个 promise</strong>，才能实现.then 的调用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> num <span class="token operator">==</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 失败情况</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;sucess&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 成功情况</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;sucess&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>####promise.then</p> <p>Promise.then 是 promise 中的函数成功时的触发，会自动调用函数中的 resolve 方法，then 接受的参数是一个函数，函数的参数就是 resolve 中的参数，例如 3.5.1 中的例子：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//做一些异步操作</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;执行了Promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;resolve中的参数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出结果为: 'resolve中的参数'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当程序未在 promise 中执行 resolve 时，即是外面有.then，也不会有反应</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;resolve中的参数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 很</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 不会执行，没有任何输出结果</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;执行了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="promise-catch"><a href="#promise-catch" class="header-anchor">#</a> promise.catch</h3> <p>Promise.then 是 promise 中的函数失败时的触发，会自动调用函数中的 reject 方法，then 接受的参数是一个函数，函数的参数就是 reject 中的参数，例如上述 then 中的例子</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">promiseClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> num <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//生成1-10的随机数</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;随机数生成的值：&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;数字太于10了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">promiseClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;成功，数字为&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;失败，原因为:&quot;</span><span class="token punctuation">,</span> reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="promise-all"><a href="#promise-all" class="header-anchor">#</a> promise.all</h3> <ul><li><p>说明</p> <p>Promise.all 可以将多个 Promise 实例包装成一个新的 Promise 实例。同时，成功和失败的返回值是不同的，成功的时候返回的是一个<strong>结果数组</strong>，而失败的时候则返回<strong>最先被 reject 失败状态的值</strong>。</p></li> <li><p>语法示例</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;成功了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> p3 <span class="token operator">=</span> Promse<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//['成功了', 'success']</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p3<span class="token punctuation">,</span> p2<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 失败了，打出 '失败'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>注意点</p> <p><strong>Promise.all 获得的成功结果的数组里面的数据顺序和 Promise.all 接收到的数组顺序是一致的</strong></p></li> <li><p>参考资料</p> <blockquote><p>https://www.jianshu.com/p/7e60fc1be1b2</p></blockquote></li></ul> <h3 id="promise-race"><a href="#promise-race" class="header-anchor">#</a> promise.race</h3> <ul><li><p>说明</p> <p>race 即赛跑的意思，promise.race()接收一个 promise 数组为参数，其中哪个 promise 最先执行完就先执行哪一个，其他的都不执行</p></li> <li><p>语法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打开的是 'failed'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="promise-原理剖析"><a href="#promise-原理剖析" class="header-anchor">#</a> promise 原理剖析</h3> <ul><li><p>参考资料</p> <blockquote><p>https://www.jianshu.com/p/d39f9d3168df</p> <p>https://zhuanlan.zhihu.com/p/58428287 图解 promise 原理</p> <p>node --&gt; promise</p></blockquote></li> <li><p>简单原理实现</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">PENDING</span> <span class="token operator">=</span> <span class="token string">&quot;PENDING&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 对应上述所说的，promise有三大状态，等待态，成功态和失败态</span>
<span class="token keyword">const</span> <span class="token constant">FULFILLED</span> <span class="token operator">=</span> <span class="token string">&quot;FULFILLED&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">REJECTED</span> <span class="token operator">=</span> <span class="token string">&quot;REJECTED&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Promise</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">executor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// executor是promise接收的那个函数，在promise中会立即执行</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token constant">PENDING</span><span class="token punctuation">;</span> <span class="token comment">// 初始默认状态为等待态</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">// value是接收到的executor中的resolve函数的参数</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>reason <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">// reason是接收到的executor中的reject函数的参数</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onResolveCallbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// resolve后的then中的函数，会放在此数组中暂存，防止因为executor中有异步操作导致的状态改变异常（例如，executor中有个两秒的setTimeOut，等真正状态改变的时候，才去调用所有的后续then方法）</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onRejectCallbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 同理如上</span>
    <span class="token keyword">let</span> <span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// promise中只可能有一种状态改变，有一种状态后，就立刻结束，不可能从失败变成成功，只有从pending态发生改变才会真正引起状态的改变，从而调用暂存函数数组中的所有函数方法</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token constant">FULFILLED</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>onResolveCallbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 遍历暂存函数中的所有函数并全部执行</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token function-variable function">reject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token constant">REJECTED</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>reason <span class="token operator">=</span> reason<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>onRejectCallbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">executor</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 对应上面说的，promise传入的函数会立刻执行</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">onFulfilled<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// then方法实现，只是简单原理而已，实际上为了实现Promise的链式调用，then方法本身返回的其实是一个promise，所以才可以实现无限then</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token constant">FULFILLED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 此处的直接调用，是executor中代码是同步代码的情况</span>
      <span class="token function">onFulfilled</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token constant">REJECTED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">onRejected</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 这里是异步代码的情况，将onFulfilled函数压入onResolveCallbacks数组中，等待异步加载完毕，状态改变后，再进行调用</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>onResolveCallbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">onFulfilled</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>onRejectCallbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">onRejected</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="async-await"><a href="#async-await" class="header-anchor">#</a> Async, Await</h2> <h3 id="generator"><a href="#generator" class="header-anchor">#</a> generator</h3> <ul><li><p>说明：</p> <p>一般的函数只有一个返回值，遇见 return 的情况下，会直接结束函数的调用，但是 generator 函数，允许函数有多个返回值，每一次返回，都会返回一个 generator 对象，需要使用.next()的方式对其进行调用。</p></li> <li><p>参考资料</p> <blockquote><p>https://www.liaoxuefeng.com/wiki/1022910821149312/1023024381818112</p></blockquote></li> <li><p>语法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 生成阶段</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token parameter">max</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> t<span class="token punctuation">,</span>
    a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> max<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> a<span class="token punctuation">;</span>
    <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>b<span class="token punctuation">,</span> a <span class="token operator">+</span> b<span class="token punctuation">]</span><span class="token punctuation">;</span>
    n<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 调用阶段</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
f<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 0, done: false}</span>
f<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 1, done: false}</span>
f<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 1, done: false}</span>
f<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 2, done: false}</span>
f<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 3, done: false}</span>
f<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: undefined, done: true}</span>
<span class="token comment">// 也可以使用for of的方式进行循环调用</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> x <span class="token keyword">of</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 依次输出0, 1, 1, 2, 3, ...</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>异步操作的同步写法：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">readFile</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fileName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// -----------------------------markLine----------------------------</span>
<span class="token keyword">var</span> <span class="token function-variable function">gen</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// *（星号）表示函数里有异步操作</span>
  <span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;/etc/fstab&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// yield 表示紧跟在后面的表达式需要等待结果</span>
  <span class="token keyword">var</span> f2 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;/etc/shells&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// -----------------------------markLine----------------------------</span>
</code></pre></div></li></ul> <h3 id="async-await-2"><a href="#async-await-2" class="header-anchor">#</a> async, await</h3> <ul><li><p>异步的“终极解决方式”</p> <p>js 的异步操作处理，从最开始的回调函数，到后来的 promise，再到 generator，每次都有改进，但是都感觉不彻底，直到出现了 async, await 函数，异步操作变得简单了起来，借用阮一峰老师的一句话“<strong>异步编程的最高境界，就是根本不用关心它是不是异步</strong>”</p></li> <li><p>参考资料</p> <blockquote><p>http://www.ruanyifeng.com/blog/2015/05/async.html</p></blockquote></li> <li><p>generator 函数</p> <p>async, await，<strong>本质上是 generator 函数的语法糖</strong></p></li> <li><p><strong>async, await 语法</strong></p> <p>在上例的代码中，如果按照 async，await 的语法规则，可改写成如下</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// -----------------------------markLine----------------------------</span>
<span class="token keyword">var</span> <span class="token function-variable function">asyncReadFile</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// async 表示函数里有异步操作</span>
  <span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;/etc/fstab&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// await 表示紧跟在后面的表达式需要等待结果</span>
  <span class="token keyword">var</span> f2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;/etc/shells&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// -----------------------------markLine----------------------------</span>
</code></pre></div><p>不难看出，写法区别仅仅是将*换成了 async，yield 换成了 await</p></li> <li><p><strong>async, await 优点</strong></p> <p>async 函数对 generator 函数的改进，体现在以下三点</p> <ol><li><p><strong>内置执行器</strong></p> <p>Generator 函数的执行必须靠执行器，所以才有了 co 函数库，而 async 函数自带执行器。也就是说，async 函数的执行，与普通函数一模一样</p></li> <li><p><strong>更好的语义</strong></p> <p>async 和 await，比起星号和 yield，语义更清楚了</p></li> <li><p><strong>更广的适用性</strong></p> <p>co 函数库约定，yield 命令后面只能是 Thunk 函数或 Promise 对象，而 async 函数的 await 命令后面，可以跟 Promise 对象和原始类型的值（数值、字符串和布尔值，但这时等同于同步操作）</p></li></ol></li> <li><p><strong>async 函数用法</strong></p> <p>await 函数后面接 promise 对象，要等待 promise 对象有返回结果了，才会继续调用函数后面的内容</p></li> <li><p><strong>promise 返回 reject 的情况</strong></p> <p>因为 await 后面接的是 promise，所以有可能会出现 reject 的情况，所以建议把 await 命令放在 try...catch 命令中，示例如下</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">somethingThatReturnsAPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 也可以写成</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">somethingThatReturnsAPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>具体的 try...catch 的用法，请见#3.7</p></li></ul> <h2 id="try-catch-finally"><a href="#try-catch-finally" class="header-anchor">#</a> try...catch...finally</h2> <ul><li><p>作用</p> <p>异常捕获</p> <p>try：执行其中的代码，如果其中的代码块有错误，则走 catch 的道路</p> <p>catch：如果 try 中存在代码异常，则会自动调用 catch 中的代码</p> <p>finally：无论是异常或是正常，都会最终执行一遍 finally 中的代码，顺序在 try 和 catch 之后</p></li> <li><p>语法</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    tryCode <span class="token operator">-</span> 尝试执行代码块
<span class="token punctuation">}</span>
<span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    catchCode <span class="token operator">-</span> 捕获错误的代码块
<span class="token punctuation">}</span>
<span class="token keyword">finally</span> <span class="token punctuation">{</span>
    finallyCode <span class="token operator">-</span> 无论 <span class="token keyword">try</span> <span class="token operator">/</span> catch 结果如何都会执行的代码块
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>示例</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token function">adddlert</span><span class="token punctuation">(</span><span class="token string">&quot;欢迎光临！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 此处并没有定义adddlert方法，所以代码运行到此处会报错，故而走catch</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> err<span class="token punctuation">.</span>message<span class="token punctuation">;</span> <span class="token comment">// 此处会打印报错的信息</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="类"><a href="#类" class="header-anchor">#</a> 类</h2> <p>类就是一类相似物体的总和，例如</p> <p>类：苹果， 对象：你的苹果，我的苹果</p> <p>类：汽车， 对象：你的宝马 A6， 我的奔驰 s7</p> <h3 id="构造方法-constructor"><a href="#构造方法-constructor" class="header-anchor">#</a> 构造方法 constructor</h3> <p>constructor 构造方法是每当类被实例化（new）的时候，都会自动执行的方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;执行了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '执行了'</span>
</code></pre></div><h3 id="构造函数"><a href="#构造函数" class="header-anchor">#</a> 构造函数</h3> <ul><li><p>说明</p> <p>类是构造函数的语法糖，类从本质上来说属于构造函数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Animal<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div></li></ul> <h3 id="类的介绍"><a href="#类的介绍" class="header-anchor">#</a> 类的介绍</h3> <ul><li><p>基本语法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Animals</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>action <span class="token operator">=</span> action<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; say hi!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">_action</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animals</span><span class="token punctuation">(</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;is jump&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dog<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dog<span class="token punctuation">.</span><span class="token function">_action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>constructor 方法是类的构造函数的默认方法，通过 new 命令生成对象实例时，自动调用该方法</p></li> <li><p>类的继承</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animals</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 超类继承父类构造器, 并传入参数name</span>
  <span class="token punctuation">}</span>
  <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我是</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">猫!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cat<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="数组方法"><a href="#数组方法" class="header-anchor">#</a> 数组方法</h2> <h3 id="数组遍历"><a href="#数组遍历" class="header-anchor">#</a> 数组遍历</h3> <blockquote><p>数组遍历 <em>Array traversal</em></p></blockquote> <ol><li><p>for 循环 (for loop)</p> <p>普通写法： for(let i=0; i &lt; arr.length; i++){}</p> <p>优化写法： for(let i=0, len= arr.length; i &lt; len; i++){}</p></li> <li><p>map 遍历</p> <p>遍历每个元素，并对每个元素都进行操作，会<strong>改变原数组中的引用类型的值，不改变值类型的值</strong>，返回值是更改后的数组</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> item <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// map需要有返回值</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>filter 过滤</p> <p>对数组中指定的一些元素进行筛选过滤，返回值为<strong>过滤后满足条件的新数组，不改变原数组</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> item <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3]</span>
</code></pre></div></li> <li><p>some</p> <p>对数组中的每项进行遍历，如果其中有一项满足所给出的条件，则<strong>返回为 true，不改变原数组</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> item <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div></li> <li><p>every</p> <p>对数组中的每项进行遍历，如果其中所有项都满足所给出的条件，则<strong>返回为 true，不改变原数组</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> item <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div></li> <li><p>forEach</p> <p>遍历每个元素，并对每个元素都进行操作，会<strong>改变原数组中的所有值，且无返回值</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> item <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 此处写法和map略有不同</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// arr: [2, 4, 6]</span>
<span class="token comment">// 错误示范：</span>
arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> item <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 直接写return item*2，并不会有任何效果，原数组不变</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>和 map 的区别</strong></p> <ul><li>map 返回新数组，不改变原数组中的基本类型的值</li> <li>foreach 会改变原数组中的值</li> <li>map 运行速度比 foreach 快，foreach 运行速度比 for 循环快</li></ul></li> <li><p>遍历方法总结</p> <table><thead><tr><th>方法名</th> <th>返回值</th> <th>是否改变原数组</th></tr></thead> <tbody><tr><td>for</td> <td>\</td> <td>是</td></tr> <tr><td>map</td> <td>new array</td> <td>是，值类型不变，引用类型改变，需要 return</td></tr> <tr><td>filter</td> <td>new array</td> <td>否</td></tr> <tr><td>some</td> <td>boolean</td> <td>否</td></tr> <tr><td>every</td> <td>boolean</td> <td>否</td></tr> <tr><td>forEach</td> <td>\</td> <td>是，无返回值</td></tr></tbody></table></li></ol> <h3 id="数组操作"><a href="#数组操作" class="header-anchor">#</a> 数组操作</h3> <blockquote><p>数组操作 <em>Array operation</em></p></blockquote> <ol><li><p><strong>concat</strong></p> <p>作用：连接两个数组</p> <p>入参：需要连接的数组（可以有多个）</p> <p>返回值：拼接后的新数组</p> <p>是否改变原数组：否</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr4 <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">,</span> arr3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr4<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,2,3,a,b,c,4,5,6</span>
</code></pre></div></li> <li><p><strong>push</strong></p> <p>作用：向数组的末尾添加一个或多个元素</p> <p>入参：需要添加进数组的元素</p> <p>返回值：新数组的长度</p> <p>是否改变原数组：是</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1,2,3,4]</span>
</code></pre></div></li> <li><p><strong>pop</strong></p> <p>作用：删除数组的最后一个值</p> <p>入参：无</p> <p>返回值：被删除的元素的值</p> <p>是否改变原数组：是</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1]</span>
</code></pre></div></li> <li><p><strong>unshift</strong></p> <p>作用：向数组的头部添加一个或多个元素</p> <p>入参：需要添加进数组头部的元素</p> <p>返回值：新数组的长度</p> <p>是否改变原数组：是</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3,4,1,2]</span>
</code></pre></div></li> <li><p><strong>shift</strong></p> <p>作用：删除数组的开头的一个值</p> <p>入参：无</p> <p>返回值：被删除的元素的值</p> <p>是否改变原数组：是</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2]</span>
</code></pre></div></li> <li><p><strong>reverse</strong></p> <p>作用：颠倒数组中的元素顺序</p> <p>入参：无</p> <p>返回值：颠倒后的数组</p> <p>是否改变原数组：是</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2]</span>
</code></pre></div></li> <li><p><strong>sort</strong></p> <p>作用：数组排序</p> <p>入参：如果字母排序，则不需要入参，如果按大小排序，入参为对比函数</p> <p>返回值：排序好后的数组</p> <p>是否改变原数组：是</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 10, 1000, 25, 5]   默认按照首字母顺序排</span>
arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 5, 10, 25, 1000]  从大到小排序</span>
</code></pre></div><p>原理：sort 方法比较两个值时，将值发送给比较函数，根据返回的（负、零、正）值对值进行排序。</p> <p>数组元素若为对象，要根据对象的某一个值进行排序，可以参考 special 文件中的第一条</p></li> <li><p><strong>join</strong></p> <p>作用：数组元素拼接成字符串</p> <p>入参：需要拼接每个元素中间的分隔符，如果不传，默认为 “,”</p> <p>返回值：拼接后的字符串</p> <p>是否改变原数组：否</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '1,2,3,4'</span>
arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '1-2-3-4'</span>
arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '1234'</span>
</code></pre></div></li> <li><p><strong>slice</strong></p> <p>作用：从数组中切割出指定的元素，并组成一个新数组</p> <p>入参：开始切割的点，结束切割的点，如果不传结束点，则默认到最后一个</p> <p>返回值：切割后的数组</p> <p>是否改变原数组：否</p> <p><strong>注意：end 的节点，不会被算进去！</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2,3], end点的元素不会算进去</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1,2,3,4]  不改变原数组</span>
</code></pre></div></li> <li><p><strong>splice</strong></p> <p>作用：删除元素，并向数组添加新元素</p> <p>入参：第一个参数为指定插入的下标值，第二个参数为删除元素的数量，第三到第 N 个参数为需要插入的元素</p> <p>返回值：无</p> <p>是否改变原数组：是</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [],如果第二个参数大于可删的数，那就默认全部删完</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1,2,5,6,7]</span>
</code></pre></div></li> <li><p>操作方法总结</p> <table><thead><tr><th>方法名</th> <th>返回值</th> <th>是否改变原数组</th></tr></thead> <tbody><tr><td>concat</td> <td>new array</td> <td>否</td></tr> <tr><td>push</td> <td>添加后的长度</td> <td>是</td></tr> <tr><td>pop</td> <td>被删除的元素</td> <td>是</td></tr> <tr><td>unshift</td> <td>添加后的长度</td> <td>是</td></tr> <tr><td>shift</td> <td>被删除的元素</td> <td>是</td></tr> <tr><td>reverse</td> <td>new array</td> <td>是</td></tr> <tr><td>sort</td> <td>new array</td> <td>是</td></tr> <tr><td>join</td> <td>拼接后的 string</td> <td>否</td></tr> <tr><td>slice</td> <td>截取后的 array</td> <td>否</td></tr> <tr><td>splice</td> <td>new array</td> <td>是</td></tr></tbody></table></li></ol> <h3 id="array-reduce"><a href="#array-reduce" class="header-anchor">#</a> Array.reduce</h3> <p>reduce 方法有很多的骚操作，类似于对数组进行一波 map，每个值都可以进行一些操作，然后实现一些逼格比较高的功能</p> <ol><li><p><strong>reduce 函数介绍</strong></p> <ul><li><p>array.reduce 是数组函数的方法，接受两个参数，第一个是对每个值进行操作的一个<strong>回调函数</strong>，第二个是设置回调函数开始执行的<strong>初始 index</strong>，第二个参数可传可不传，若不传，则默认 index 从<strong>1</strong>开始，一般都会需要设置为 0。</p></li> <li><p>reduce 的返回值是<strong>第一个参数中回调函数的返回值</strong></p></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code>array<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> initialValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>reduce 第一个参数，回调函数的介绍</strong></p> <p>从 1 中得知，reduce 接受的第一个参数是一个回调函数，该函数拥有四个入参，分别是</p> <ul><li>previousValue：上一次执行完回调函数后 return 出来的那个值，如果没有，则取 initialValue 的值</li> <li>currentValue：本次循环中，数组中对应的值，类似 map 中的 item</li> <li>index：本次循环所在的数组的 index 索引</li> <li>arr：调用 reduce 的数组，就是 arr.reduce 中的 arr 本身呗，一般好像没怎么用到</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 代码实现</span>
<span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
array<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pre<span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">// 0	因为设置了初始值0，所以此处为0</span>
	<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 1	若没有设置初始值，会直接从index=1开始执行起来</span>
	<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 0</span>
	<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">// [1,2,3,4]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p><strong>arr 为空的情况</strong></p> <p>如果 arr 为空，而没有设置初始值，那么将会直接报错，如果设置了初始值为 0，那么会返回 0</p></li> <li><p><strong>reduce 的相关骚操作用法</strong></p> <ul><li><p>简单求和</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>求每个元素出现的次数</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span> cur<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token keyword">in</span> pre<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pre<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    pre<span class="token punctuation">[</span>cur<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> pre<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {a: 2, b: 3, c: 1}</span>
</code></pre></div><p>该案例中有几个注意点</p> <p>① 只有当操作的对象 pre 是一个对象时，使用 cur in pre 才会成功获取到内容，如果 pre 是一个数组，那么会出现一个神奇的数组结构，如下，披着数组的皮，但是实际上是一个对象</p> <p>详细关于 in 关键字的操作，可见 ES6+章 2.7</p> <p>② 一定要把 pre 给返回出来，pre 函数如果没有返回值，走到下一个循环内就会直接报错！</p></li> <li><p>对象数组里的属性求和</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Leo&quot;</span><span class="token punctuation">,</span>
    salary<span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Vivien&quot;</span><span class="token punctuation">,</span>
    salary<span class="token operator">:</span> <span class="token number">20000</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span> cur<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> pre <span class="token operator">+</span> cur<span class="token punctuation">.</span>salary<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 50000</span>
</code></pre></div></li></ul></li> <li><p><strong>参考文档</strong></p> <p>写得非常详细，而且简单易懂，强推</p> <blockquote><p>https://www.jianshu.com/p/e375ba1cfc47</p></blockquote></li></ol> <h3 id="类数组"><a href="#类数组" class="header-anchor">#</a> 类数组</h3> <ul><li><p>类数组的定义：</p> <p>要包含 Length，否则无法转换</p></li> <li><p>类数组转数组</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arrObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token operator">:</span> <span class="token string">'Mary'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'bill'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token string">'guy'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token string">'trueman'</span><span class="token punctuation">,</span> <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">}</span>
<span class="token comment">// 方法一：</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arrObj<span class="token punctuation">)</span>
<span class="token comment">// 方法二：</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arrObj<span class="token punctuation">)</span>
<span class="token comment">// 方法三（骚操作）：</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arrObj<span class="token punctuation">)</span>
<span class="token comment">// 结果	['Mary', 'bill', 'guy', 'trueman']</span>


<span class="token comment">// 如有其他情况，例如，少了数字，或者键值不为数字或者数字样式的字符串，或者没有length，都会导致转换出问题，如下</span>
<span class="token comment">// 情况一： 无length</span>
<span class="token keyword">let</span> arrObj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'bill'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token string">'guy'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token string">'trueman'</span><span class="token punctuation">}</span>
				<span class="token comment">// 结果  []</span>
<span class="token comment">// 情况二： length与实际不符</span>
<span class="token keyword">let</span> arrObj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'bill'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token string">'guy'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token string">'trueman'</span><span class="token punctuation">,</span> <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span>
				<span class="token comment">// 结果  [undefined, 'bill', 'guy']</span>
<span class="token comment">// 情况二： 键值为字符串，而非数字</span>
<span class="token keyword">let</span> arrObj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'bill'</span><span class="token punctuation">,</span> <span class="token string-property property">'2'</span><span class="token operator">:</span> <span class="token string">'guy'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token string">'trueman'</span><span class="token punctuation">,</span> <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span>
				<span class="token comment">// 结果  (3) [undefined, undefined, 'guy']， 数字字符串可以隐式转换，是支持的</span>
</code></pre></div></li></ul> <h2 id="字符串方法"><a href="#字符串方法" class="header-anchor">#</a> 字符串方法</h2> <h3 id="字符串检索"><a href="#字符串检索" class="header-anchor">#</a> 字符串检索</h3> <ol><li><p><strong>indexOf</strong></p> <p>indexOf 用于检查字符串中是否有某一段字符串，如果有，返回索引值，否则返回-1</p></li> <li><p><strong>search</strong></p> <p>search 用于检查字符串中某一段字符串所出现的位置，如果有，返回索引值，否则返回-1，与 indexOf 不同的是，search 支持正则</p></li></ol> <h3 id="字符串提取"><a href="#字符串提取" class="header-anchor">#</a> 字符串提取</h3> <ol><li><p><strong>slice</strong></p> <p>slice 接收两个参数，起始的索引和终止的索引，如果只传一个，那么会返回裁剪点到之后的全部内容</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;Apple, Banana, Mango&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> res <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Banana</span>
</code></pre></div></li> <li><p><strong>subString</strong></p> <p>用法类似 slice，不过不支持负数</p></li> <li><p><strong>substr</strong></p> <p>接受两个参数，第一个为起点索引，第二个为截取的长度</p></li></ol> <h3 id="数字和字符串的转化"><a href="#数字和字符串的转化" class="header-anchor">#</a> 数字和字符串的转化</h3> <ul><li><p>数字转字符串</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">41</span><span class="token punctuation">;</span>
num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '41'</span>
num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '101001'		转二进制</span>
num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '29'	转十六进制</span>
</code></pre></div></li> <li><p>字符串转数字</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;0x29&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 16</span>

<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;101001&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 41</span>

<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;29&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">&quot;16&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 41</span>
</code></pre></div></li></ul> <h2 id="settimeout-setinterval"><a href="#settimeout-setinterval" class="header-anchor">#</a> setTimeout&amp;setInterval</h2> <h3 id="settimeout"><a href="#settimeout" class="header-anchor">#</a> setTimeout</h3> <h3 id="setinterval"><a href="#setinterval" class="header-anchor">#</a> setInterval</h3> <h2 id="throw"><a href="#throw" class="header-anchor">#</a> throw</h2> <h3 id="_1-throw-简介"><a href="#_1-throw-简介" class="header-anchor">#</a> 1 throw 简介</h3> <p>throw 是用来<strong>抛出异常</strong>的</p> <p>可以抛出一个 string，number，boolean 或者 object</p> <p>而且，一旦代码运行到 throw 的时候，会**自动结束！**并在控制台中抛出红色异常信息</p> <p>一般可以用来搭配报错信息使用</p> <h3 id="_2-throw-语法"><a href="#_2-throw-语法" class="header-anchor">#</a> 2 throw 语法</h3> <ul><li><p>基本语法</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">throw</span> <span class="token number">123</span><span class="token punctuation">;</span> <span class="token comment">// VM5850:1 Uncaught 111</span>
<span class="token keyword">throw</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">;</span> <span class="token comment">// VM5856:1 Uncaught 111</span>
<span class="token keyword">throw</span> <span class="token punctuation">{</span> <span class="token builtin">number</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// VM6080:1 Uncaught {number: 1}, 该对象可展开</span>
<span class="token keyword">throw</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// VM6175:1 Uncaught true</span>
<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;出错了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// VM6295:1 Uncaught Error: 出错了</span>
<span class="token comment">// at &lt;anonymous&gt;:1:7</span>
</code></pre></div></li> <li><p>throw 会自动结束代码</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1：</span>
<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;出错了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 此处不会打印111，因为throw已经抛出异常结束了代码</span>

<span class="token comment">// 2：</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;出错了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 此处会打印111，console.error并不会结束代码进程</span>
</code></pre></div></li></ul> <h2 id="map-set"><a href="#map-set" class="header-anchor">#</a> Map&amp;Set</h2> <p>Map 和 Set 是 ES6 中新增的两种数据结构</p> <h3 id="_1-map"><a href="#_1-map" class="header-anchor">#</a> 1 Map</h3> <p>Map 的结构和 Object 很像，也是一种<strong>键值对</strong>的集合，只不过，Object 中的键是字符串 string 格式，而 Map 中的键可以是任意类型，包括对象也可以是键！</p> <p>Map 中设置键值对使用 set 方法，获取键对应的值使用 get 方法，删除某个键值对使用 delete 方法，查询是否有某一个键值使用 has 方法。</p> <p>代码如下:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> mapmap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mapmap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在设置引用类型为键名的时候，注意要使用变量名，不然是获取不到的</span>
<span class="token comment">// 错误示范</span>
mapmap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mapmap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
<span class="token comment">// 正确示范</span>
<span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
mapmap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mapmap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [4,5,6]</span>
</code></pre></div><h3 id="_2-set"><a href="#_2-set" class="header-anchor">#</a> 2 Set</h3> <p>不同于 map 是键值对的集合，set 只是<strong>值的集合</strong>，既然 Map 的结构和 Object 很像，那 Set 自然对应的就是和 Array 很像了，与数组不同的是，Set 中不会存在相同的值，所以，可以很方便地用于数组去重，如下</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> newArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// [1,2,3,4]</span>
</code></pre></div><h3 id="_3-weakmap"><a href="#_3-weakmap" class="header-anchor">#</a> 3 WeakMap</h3> <p>待补充，简而言之和 map 很像，但是 key 值只能是对象</p> <h2 id="proxy-reflect"><a href="#proxy-reflect" class="header-anchor">#</a> Proxy&amp;Reflect</h2> <h3 id="_1-proxy"><a href="#_1-proxy" class="header-anchor">#</a> 1 proxy</h3> <p>Proxy 可以对目标对象的读取、函数调用等操作进行拦截，然后进行操作处理。它不直接操作对象，而是像代理模式，通过对象的代理对象进行操作，在进行这些操作时，可以添加一些需要的额外操作。</p> <p><strong>用法</strong></p> <p>一个 Proxy 对象由两个部分组成： target 、 handler 。在通过 Proxy 构造函数生成实例对象时，需要提供这两个参数。 target 即目标对象， handler 是一个对象，声明了代理 target 的指定行为，此处未声明 handler，而是直接当做了第二入参</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Tom&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 此处target是原对象，key是原对象的属性，例如下例中的name属性，receiver是proxy对象本身</span>
    <span class="token keyword">return</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 不是target.key</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>

proxy<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// 实际执行 handler.get</span>
proxy<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span> <span class="token comment">// 实际执行 handler.set</span>
</code></pre></div><p>####2 reflect</p> <h2 id="模块化语法"><a href="#模块化语法" class="header-anchor">#</a> 模块化语法</h2> <h3 id="_1-commonjs"><a href="#_1-commonjs" class="header-anchor">#</a> 1 commonjs</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 导出语法-------------文件a.js</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">,</span>
  b<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 导入语法-------------文件b.js</span>
<span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./a.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre></div><p>####2 es6</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 导出语法-------------文件a.js</span>
<span class="token keyword">export</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">// or</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
  d <span class="token operator">=</span> <span class="token number">4</span>
<span class="token punctuation">}</span>
<span class="token comment">// 导入语法-------------文件b.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'a.js'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>  <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>  <span class="token comment">// 2</span>
<span class="token comment">// or</span>
<span class="token keyword">import</span> demo <span class="token keyword">from</span> <span class="token string">'a.js'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>demo<span class="token punctuation">.</span>c<span class="token punctuation">)</span>  <span class="token comment">// 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>demo<span class="token punctuation">.</span>d<span class="token punctuation">)</span>  <span class="token comment">// 4</span>
</code></pre></div><h4 id=""><a href="#" class="header-anchor">#</a></h4></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/leo-blog/computer-science/Front-end/CSS.html" class="prev">
        CSS
      </a></span> <span class="next"><a href="/leo-blog/computer-science/Front-end/TypeScript.html">
        TypeScript
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/leo-blog/assets/js/app.bfe0a0b7.js" defer></script><script src="/leo-blog/assets/js/2.36229468.js" defer></script><script src="/leo-blog/assets/js/19.557679db.js" defer></script>
  </body>
</html>
