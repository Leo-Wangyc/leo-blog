(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{292:function(t,a,s){t.exports=s.p+"assets/img/image-20211223175455216.74677879.png"},293:function(t,a,s){t.exports=s.p+"assets/img/image-20211223175558501.50467878.png"},294:function(t,a,s){t.exports=s.p+"assets/img/image-20211223175647209.2843d593.png"},295:function(t,a,s){t.exports=s.p+"assets/img/image-20211223175716100.1497578b.png"},296:function(t,a,s){t.exports=s.p+"assets/img/image-20211223175825223.09cc4630.png"},297:function(t,a,s){t.exports=s.p+"assets/img/image-20211223180127768.4927e5d8.png"},298:function(t,a,s){t.exports=s.p+"assets/img/image-20220105171511971.79aee28c.png"},299:function(t,a,s){t.exports=s.p+"assets/img/image-20220105171604319.3b722545.png"},300:function(t,a,s){t.exports=s.p+"assets/img/image-20220105171718485.b15ee42a.png"},319:function(t,a,s){"use strict";s.r(a);var e=s(14),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("CloudDevelopment")]),t._v(" "),a("p",[t._v("周分享会（2021-8-20）")]),t._v(" "),a("ul",[a("li",[t._v("主题：小程序云开发")]),t._v(" "),a("li",[t._v("ppt 地址：https://prezi.com/view/LuFhZsaxvjLS7vaeV1eR/")]),t._v(" "),a("li",[t._v("相关参考视频/文档：\n① 快速搭建 Taro 云开发项目脚手架：https://taro-docs.jd.com/taro/docs/GETTING-STARTED\n② 云开发学习视频：https://www.bilibili.com/video/BV1x54y1s7pk?p=60&spm_id_from=pageDriver\n③ 云函数部署失败解决办法：https://blog.csdn.net/qq_34464926/article/details/96497906\n④ 微信云开发文档：https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html\n⑤ Taro 云开发文档：https://taro-docs.jd.com/taro/docs/apis/cloud/cloud/")])]),t._v(" "),a("h1",{attrs:{id:"前置知识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前置知识"}},[t._v("#")]),t._v(" 前置知识")]),t._v(" "),a("p",[t._v("###微信 openId 和微信 unionId")]),t._v(" "),a("blockquote",[a("p",[t._v("https://juejin.cn/post/6844903789044973575")])]),t._v(" "),a("h1",{attrs:{id:"云开发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云开发"}},[t._v("#")]),t._v(" 云开发")]),t._v(" "),a("h2",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),a("h1",{attrs:{id:"云函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云函数"}},[t._v("#")]),t._v(" 云函数")]),t._v(" "),a("h2",{attrs:{id:"云函数本地调试方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云函数本地调试方法"}},[t._v("#")]),t._v(" 云函数本地调试方法")]),t._v(" "),a("p",[t._v("前置条件："),a("strong",[t._v("要保证在有云函数的项目中进行本地调试，否则会报找不到云函数")])]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:s(292),alt:"image-20211223175455216"}}),t._v(" "),a("p",[t._v("即如图所示，需为上述项目中才可")]),t._v(" "),a("p",[t._v("具体步骤：")]),t._v(" "),a("p",[t._v("1."),a("img",{staticStyle:{zoom:"50%"},attrs:{src:s(293),alt:"image-20211223175558501"}})]),t._v(" "),a("p",[t._v("打开云开发面板")]),t._v(" "),a("p",[t._v("2."),a("img",{staticStyle:{zoom:"50%"},attrs:{src:s(294),alt:"image-20211223175647209"}})]),t._v(" "),a("p",[t._v("进入云函数区块")]),t._v(" "),a("p",[t._v("3."),a("img",{staticStyle:{zoom:"40%"},attrs:{src:s(295),alt:"image-20211223175716100"}})]),t._v(" "),a("p",[t._v("选择本地调试")]),t._v(" "),a("p",[t._v("4."),a("img",{staticStyle:{zoom:"50%"},attrs:{src:s(296),alt:"image-20211223175825223"}})]),t._v(" "),a("p",[t._v("开发面板右侧，选择手动调用，如果选择从模拟器调用，请保持基础库等级低于 2.14.3")]),t._v(" "),a("p",[t._v("5."),a("img",{staticStyle:{zoom:"50%"},attrs:{src:s(297),alt:"image-20211223180127768"}})]),t._v(" "),a("p",[t._v("更改上述相关参数，即可实现本地调用")]),t._v(" "),a("h2",{attrs:{id:"云函数调用云数据库方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云函数调用云数据库方式"}},[t._v("#")]),t._v(" 云函数调用云数据库方式")]),t._v(" "),a("blockquote",[a("p",[t._v("云函数请求云数据库为异步，所以，需要进行异步处理")]),t._v(" "),a("p",[t._v("https://blog.csdn.net/weixin_43430789/article/details/90601066")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("云函数调用云数据库后，直接返回 success，没有返回所 return 的内容，或者打印出来是 Undefined")])]),t._v(" "),a("ol",[a("li",[t._v("先查看云数据库集合名称是否正确")]),t._v(" "),a("li",[t._v("再查看云数据库权限是否设置为可读")]),t._v(" "),a("li",[t._v("仔细查看异步逻辑，promise 之间的处理")])]),t._v(" "),a("p",[t._v("详细样例可以查看农场项目里面的 getGoldAndCheck 云函数")])])]),t._v(" "),a("h2",{attrs:{id:"云函数引入插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云函数引入插件"}},[t._v("#")]),t._v(" 云函数引入插件")]),t._v(" "),a("h2",{attrs:{id:"云函数中的时区问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云函数中的时区问题"}},[t._v("#")]),t._v(" 云函数中的时区问题")]),t._v(" "),a("p",[t._v("注：云函数中默认的时区为 UTC+0，并不是 UTC+8 的中国时区，如果要默认 UTC+8，则需要更改云函数的环境变量，设置 TZ 为 asia/shanghai")]),t._v(" "),a("blockquote",[a("p",[t._v("https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/functions/notice.html")])]),t._v(" "),a("p",[t._v("具体操作：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("第一步，进入云函数版本管理")]),t._v(" "),a("img",{staticStyle:{zoom:"30%"},attrs:{src:s(298),alt:"image-20220105171511971"}})]),t._v(" "),a("li",[a("p",[t._v("第二步，点击配置")]),t._v(" "),a("img",{staticStyle:{zoom:"30%"},attrs:{src:s(299),alt:"image-20220105171604319"}})]),t._v(" "),a("li",[a("p",[t._v("第三步，写入配置 TZ, Asia/Shanghai，点击确认即可")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:s(300),alt:"image-20220105171718485"}})])]),t._v(" "),a("h1",{attrs:{id:"云数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云数据库"}},[t._v("#")]),t._v(" 云数据库")]),t._v(" "),a("h2",{attrs:{id:"云数据库数据获取-get"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云数据库数据获取-get"}},[t._v("#")]),t._v(" 云数据库数据获取 get")]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" db "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Taro"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cloud"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("database")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//或者 wx.cloud.database();")]),t._v("\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("collection")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"demo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// collection表示集合，传参为集合的名称")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h1",{attrs:{id:"云存储"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云存储"}},[t._v("#")]),t._v(" 云存储")]),t._v(" "),a("h1",{attrs:{id:"项目实战"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目实战"}},[t._v("#")]),t._v(" 项目实战")]),t._v(" "),a("h2",{attrs:{id:"恋之农场项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#恋之农场项目"}},[t._v("#")]),t._v(" 恋之农场项目")]),t._v(" "),a("h2",{attrs:{id:"开发中遇到的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发中遇到的问题"}},[t._v("#")]),t._v(" 开发中遇到的问题")]),t._v(" "),a("h3",{attrs:{id:"_1-如何让多渠道小程序共用一套云"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-如何让多渠道小程序共用一套云"}},[t._v("#")]),t._v(" 1.如何让多渠道小程序共用一套云")]),t._v(" "),a("blockquote",[a("p",[t._v("无法实现")])]),t._v(" "),a("h3",{attrs:{id:"_2-如何同时打开同一个微信和-qq-小程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-如何同时打开同一个微信和-qq-小程序"}},[t._v("#")]),t._v(" 2. 如何同时打开同一个微信和 qq 小程序")]),t._v(" "),a("p",[t._v("Taro 的项目 config 目录下进行配置")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("outputRoot")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("dist/")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TARO_ENV")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("p",[t._v("把输入端带上当前跑的环境即可互不影响")]),t._v(" "),a("h1",{attrs:{id:"云部署静态网站"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云部署静态网站"}},[t._v("#")]),t._v(" 云部署静态网站")]),t._v(" "),a("p",[t._v("云部署静态网站可以用于从普通浏览器，或者别的腾讯系 app 中跳转小程序")]),t._v(" "),a("blockquote",[a("p",[t._v("参考文档：https://zhuanlan.zhihu.com/p/336173709")])])])}),[],!1,null,null,null);a.default=n.exports}}]);